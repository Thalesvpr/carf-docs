# DomainEvent (Evento de Domínio)

Conceito base para eventos de domínio representando fato de negócio significativo que já ocorreu emitido por aggregate root permitindo comunicação desacoplada entre agregados e disparo de side effects após persistência. Interface marcadora ou classe base abstrata serve como contrato comum permitindo infraestrutura processar qualquer evento genericamente através de polimorfismo sem conhecer tipos específicos. Propriedades conceituais recomendadas por convenção incluem identificador único do evento útil para deduplicação e rastreamento, timestamp quando evento ocorreu populado automaticamente na criação com hora UTC, identificador da entidade que emitiu evento permitindo correlação, identificador do tenant para isolamento multi-tenant em handlers, e dados específicos do contexto do evento variando por tipo. Comportamentos estabelecem que eventos são imutáveis após criação representando fato histórico que não muda, nomes são escritos no passado tipo UnitCreatedEvent HolderLinkedEvent CertificateIssuedEvent indicando algo que JÁ aconteceu, eventos carregam dados suficientes para handlers processarem sem queries adicionais minimizando acoplamento mas sem carregar entidade completa evitando serialização pesada, e eventos não contêm lógica de negócio apenas dados sendo meros DTOs. Ciclo de vida estabelece que evento é criado e registrado em aggregate root durante execução de método de negócio tipo Unit.Approve cria UnitApprovedEvent chamando AddDomainEvent, eventos acumulam em coleção privada do aggregate sem disparar imediatamente, após SaveChanges bem-sucedido infraestrutura coleta eventos de todas entities modificadas, eventos são despachados para handlers registrados processando assincronamente, handlers executam side effects como enviar email criar notificação invalidar cache disparar job, após processamento eventos são cleared do aggregate evitando redispatch, e falha em handler não reverte transação já commitada logando erro e continuando. Padrões de uso incluem notificações onde UnitCreatedEvent dispara envio de email ao técnico de campo, invalidação de cache onde UnitUpdatedEvent limpa cache de listagem de unidades, integração com sistemas externos onde CertificateIssuedEvent envia dados para registro de imóveis via webhook, auditoria onde todos eventos são logados em event store fornecendo audit trail completo, workflows complexos onde um evento dispara criação de tarefas ou mudanças em outros agregados mantendo acoplamento baixo, e eventual consistency onde mudança em um agregado eventualmente propaga para outros através de eventos ao invés de transação distribuída. Implementação varia onde .NET usa interface IDomainEvent com library como MediatR para dispatch, TypeScript frontend geralmente não usa events pois são backend concept, mobile pode simular events para sync queue registrando ações offline, e event sourcing armazena eventos como source of truth reconstruindo estado aplicando eventos sequencialmente.

**Módulos:** GEOAPI, GEOWEB, REURBCAD, GEOGIS

---

**Última atualização:** 2026-01-10
