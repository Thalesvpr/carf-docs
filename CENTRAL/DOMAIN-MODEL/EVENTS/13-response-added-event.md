# ResponseAddedEvent

Domain event emitido por LegitimationRequest aggregate root quando novo parecer técnico ou jurídico é adicionado ao processo de legitimação representando fato que análise foi registrada formalmente contribuindo para decisão final de aprovação ou rejeição e formando trail de decisão auditável. Payload do evento contém identificador do processo de legitimação ao qual resposta foi adicionada, identificador único da LegitimationResponse entity criada referenciando parecer completo, tipo de resposta enumerado (PRELIMINARY_ANALYSIS TECHNICAL_REVIEW LEGAL_REVIEW FINAL_DECISION) categorizando etapa de análise, identificador do analista que elaborou parecer rastreando responsabilidade técnica ou jurídica, decisão enumerada (APPROVED REJECTED NEEDS_CORRECTION) indicando resultado da análise, justificativa textual detalhada explicando razões para decisão especialmente importante para rejeições ou solicitações de correção, recomendações opcionais array de strings listando ações corretivas ou melhorias sugeridas, identificador do tenant para isolamento multi-tenant, e timestamp UTC quando resposta foi criada para ordenação cronológica de pareceres formando histórico de análise. Event handlers subscribers processam evento executando side effects como enviar notificação ao requerente quando decisão é NEEDS_CORRECTION informando pendências a serem sanadas com lista detalhada de correções requeridas, atualizar status do processo quando decisão é definitiva (APPROVED ou REJECTED em FINAL_DECISION) transicionando workflow para próximo estado, invalidar cache de detalhes de processo forçando refresh de visualização que exibe timeline de pareceres, registrar em audit trail adição de resposta para rastreabilidade legal especialmente importante para processos contestados onde histórico de decisões técnicas é evidência, incrementar contador de processos analisados por analista em dashboard de produtividade atualizando métricas de desempenho individual e de equipe, enviar notificação para gestor quando parecer técnico recomenda aprovação mas requer validação jurídica disparando próxima etapa de workflow, gerar relatório de análise consolidado quando todas respostas obrigatórias foram adicionadas preparando documentação para decisão final, atualizar timeline visual de processo exibindo nova entrada em interface web permitindo requerente e gestores acompanharem progresso, e disparar recalculo de estatísticas de decisões agregando pareceres por tipo e decisão para análise de qualidade de processos. Motivação do evento permite workflow multi-etapa onde processo requer validação técnica e jurídica independentes formando consenso antes de aprovação final, facilita rastreabilidade de decisões onde cada parecer é registrado com analista responsável timestamp e justificativa permitindo auditoria legal ou contestação fundamentada, habilita transparência para requerente onde histórico de pareceres é acessível via portal web demonstrando progresso de análise, e suporta workflows condicionais onde decisão NEEDS_CORRECTION pausa processo aguardando correção antes de prosseguir. Regras de processamento estabelecem que evento é despachado após SaveChanges garantindo que LegitimationResponse foi persistida com validação de campos obrigatórios (decisão e justificativa), handlers de notificação executam assincronamente permitindo envio de email e criação de notificação in-app sem bloquear operação principal, transição de status de processo quando decisão é FINAL_DECISION dispara RequestApprovedEvent ou RequestRejectedEvent propagando mudança de estado, e idempotência é requerida especialmente para incremento de contadores de produtividade evitando duplicação de métricas em caso de retry de evento.

**Módulos:** GEOAPI, GEOWEB, REURBCAD, GEOGIS

---

**Última atualização:** 2026-01-10
**Status do arquivo**: Review
