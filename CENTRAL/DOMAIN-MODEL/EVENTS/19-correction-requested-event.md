# CorrectionRequestedEvent

Domain event emitido por LegitimationRequest aggregate root quando analista identifica deficiências sanáveis em processo de legitimação fundiária solicitando correções ao requerente antes de prosseguir com análise representando fato que processo foi pausado aguardando complementação de documentação ou ajuste de informações permitindo regularização após correção. Payload do evento contém identificador do processo de legitimação para o qual correções foram solicitadas, número de protocolo para referência externa, identificador do Account analista que solicitou correções rastreando responsável pela revisão, identificador do tenant instituição que conduz regularização, tipo de correção enumerado (DOCUMENTATION_INCOMPLETE TECHNICAL_DATA_INCONSISTENT BOUNDARY_ADJUSTMENT_NEEDED HOLDER_INFO_MISSING) categorizando natureza de deficiência, lista detalhada de correções array de strings especificando cada item a ser sanado (ex: anexar CPF do cônjuge corrigir área no memorial descritivo ajustar geometria de unidade para ficar dentro de community boundary), prazo para correção em dias tipicamente 30 dias conforme legislação permitindo requerente reunir documentação ou corrigir dados, identificador de parecer que fundamentou solicitação vinculando correções a LegitimationResponse específica, e timestamp UTC quando solicitação foi criada para rastreamento de histórico de iterações. Event handlers subscribers processam evento executando side effects como enviar notificação ao requerente informando pendências com lista detalhada de correções prazo para atendimento e orientações sobre procedimento de resubmissão, atualizar status de processo para NEEDS_CORRECTION pausando workflow até resubmissão, invalidar cache de detalhes de processo forçando refresh de visualização que exibe lista de pendências, registrar em audit trail solicitação de correções para rastreabilidade de iterações entre analista e requerente, agendar alerta automático quando prazo de correção estiver se aproximando (ex: 7 dias antes de vencimento) notificando requerente sobre urgência, incrementar contador de processos com pendências em dashboard de métricas atualizando estatísticas de taxa de correção first-time-right, gerar relatório de correções solicitadas por tipo agregando estatísticas para identificar deficiências recorrentes orientando capacitação de técnicos de campo, enviar notificação para técnico de campo que coletou dados originalmente se identificado informando sobre deficiências para aprendizado e melhoria de processo de coleta, atualizar timeline visual de processo exibindo solicitação de correções permitindo requerente consultar histórico de iterações, e disparar workflow de follow-up automático verificando se correções foram submetidas dentro de prazo disparando lembrete se não houver resposta. Motivação do evento permite iteração colaborativa entre analista e requerente onde deficiências sanáveis não resultam em rejeição imediata dando oportunidade de correção, facilita cumprimento de Lei 13465/2017 onde processos devem ser concluídos sempre que possível evitando rejeições desnecessárias por deficiências corrigíveis, habilita melhoria contínua de processo de coleta onde estatísticas de correções mais frequentes orientam treinamento de técnicos de campo, e suporta transparência para requerente onde lista detalhada de pendências permite compreender exatamente o que precisa ser corrigido evitando múltiplas rodadas de correção. Regras de processamento estabelecem que evento é despachado após SaveChanges garantindo que status foi atualizado para NEEDS_CORRECTION e lista de correções persistida, handlers de notificação incluem instruções específicas para cada tipo de correção solicitada com exemplos quando aplicável, resubmissão após correção pode criar novo evento ou transicionar processo de volta para UNDER_ANALYSIS dependendo de workflow configurado, e idempotência é crítica especialmente para agendamento de alertas prevenindo duplicação de lembretes em caso de retry de evento.

**Implementações por projeto:**
- Backend .NET: `PROJECTS/GEOAPI/LAYERS/DOMAIN/EVENTS/correction-requested-event.cs`
- Frontend React: Não se aplica (eventos backend)
- Mobile React Native: Não se aplica (processo backend)
- Plugin GIS: Não se aplica

---

**Última atualização:** 2025-01-06
