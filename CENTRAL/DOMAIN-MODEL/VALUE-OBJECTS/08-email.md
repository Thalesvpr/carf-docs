# Email (Endereço de Email Validado)

Value object imutável representando endereço de email válido conforme RFC 5322 garantindo que apenas emails bem formados são aceitos no sistema evitando erros de comunicação e problemas de entrega. Valor conceitual é string texto contendo endereço de email completo (local@domain) normalizado para lowercase facilitando comparações case-insensitive e prevenindo duplicações por diferença de capitalização. Regras de validação incluem formato deve seguir especificação RFC 5322 com parte local (antes do @) permitindo caracteres alfanuméricos pontos hífens underscores e alguns símbolos especiais, símbolo @ único separando parte local de domínio, parte de domínio (após @) contendo ao menos um ponto e terminando com TLD válido (com, br, org, etc), comprimento máximo de 254 caracteres conforme RFC, parte local máximo de 64 caracteres e domínio máximo de 253 caracteres, e validação via expressão regular robusta cobrindo casos comuns sem aceitar formatos obscuros raramente usados que complicam implementação desnecessariamente. Validação adicional opcional pode verificar MX record do domínio consultando DNS para confirmar que domínio possui servidor de email configurado (detecta typos como gmail.con ao invés de gmail.com ou domínios inexistentes), porém esta validação é cara em performance e pode falhar por problemas temporários de rede sendo recomendada apenas em contextos específicos como cadastro inicial de usuário onde confirmação de email subsequente valida entregabilidade real. Formato interno armazena email em lowercase completo sem espaços extras (trim aplicado), formato de exibição pode preservar capitalização original se necessário para UX mas comparações e unicidade sempre usam lowercase, e normalização inclui remoção de plus addressing (usuario+tag@domain vira usuario@domain) opcionalmente dependendo de regras de negócio (alguns sistemas tratam como emails distintos, outros como alias do mesmo usuário). Operações incluem Create validando formato e lançando ValidationException se inválido, Equals comparando valores normalizados ignorando case, ToString retornando email em lowercase, e opcionalmente Verify enviando email de confirmação com link para validar que endereço existe e usuário tem acesso (double opt-in). Uso típico em Account armazenando email de login do usuário com constraint de unicidade por tenant, em Holder opcionalmente armazenando email de contato do titular para comunicações oficiais do processo de legitimação, em notificações como destinatário de emails automáticos (aprovação de unidade, solicitação de correção, certidão emitida), e em relatórios onde email de responsável é incluído em documentação gerada. Sistema suporta múltiplos emails por usuário se necessário (email principal para login, emails secundários para notificações) mas Account.email é único e obrigatório servindo como identificador alternativo ao username. Compliance LGPD exige que email seja tratado como dado pessoal sensível protegido com criptografia em repouso, acessos logados em auditoria, e titular possa solicitar alteração ou exclusão via direitos de portabilidade e esquecimento (soft delete preservando hash do email para prevenir recadastro sem revelar valor original). Validação de email no frontend é replicada no backend para segurança pois usuários maliciosos podem burlar validação client-side, e emails são sanitizados antes de uso em queries SQL ou templates de email prevenindo injeção de código.

**Módulos:** GEOAPI, GEOWEB, REURBCAD, GEOGIS

---

**Última atualização:** 2026-01-10
**Status do arquivo**: Review
