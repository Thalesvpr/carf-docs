# Account (Usuário do Sistema)

Entidade representando usuário do sistema sincronizado com provedor de autenticação externo garantindo Single Sign-On e gestão centralizada de identidades. Campos conceituais incluem identificador único global, identificador externo do provedor de autenticação (Keycloak UUID) estabelecendo vínculo entre sistemas, tenant_id vinculando usuário obrigatoriamente a uma instituição cliente, email único dentro do tenant usado como login principal, nome completo do usuário para exibição em interfaces, role enum definindo nível de permissão global (SUPER_ADMIN ADMIN MANAGER ANALYST FIELD_AGENT), status ativo/inativo controlando acesso individual independente do tenant, último login timestamp para auditoria de acesso, preferências de usuário JSON armazenando configurações personalizadas (idioma tema notificações dashboard_layout), e metadados de auditoria (criado em atualizado em deletado em). Relacionamentos incluem pertence obrigatoriamente a um Tenant (N:1 onde usuário não pode existir sem tenant), participa de múltiplas Teams equipes de trabalho via junction TeamMember (N:N especificando role dentro da equipe LEADER ou MEMBER), possui múltiplas CommunityAuthorizations definindo acesso granular a comunidades específicas (1:N permitindo controle fino de quais comunidades usuário pode visualizar/editar), é responsável por criação/modificação de entidades rastreadas via campos created_by e updated_by, e opcionalmente é atribuído como analista responsável em processos de legitimação. Regras de negócio estabelecem que email deve ser único por tenant (não globalmente, permitindo mesmo email em tenants diferentes), provedor de autenticação é Single Source of Truth para senha e autenticação (sistema não armazena credenciais localmente), role determina permissões base mas CommunityAuthorizations refinam acesso específico (FIELD_AGENT com acesso a Community A mas não B), ao desativar account usuário perde acesso imediatamente mas registros históricos preservam referência ao usuário, sincronização com provedor de autenticação ocorre no login (dados atualizados como nome e email são propagados do provedor para sistema), e SUPER_ADMIN role é global permitindo acesso a todos os tenants (usado apenas para manutenção e suporte pela equipe interna). Workflow típico inicia com criação de account no provedor de autenticação (Keycloak), callback do OAuth2 cria ou atualiza registro local de account sincronizando dados, atribuição de role inicial pelo administrador do tenant, atribuição a teams e configuração de community authorizations conforme necessidade, e usuário acessa sistema via SSO sem necessidade de senha local. Account soft delete é obrigatório preservando histórico completo de ações do usuário (created_by updated_by não podem referenciar account deletado fisicamente), e reativação de account desativado é possível via administrador restaurando acesso sem perder histórico.

**Módulos:** GEOAPI, GEOWEB, REURBCAD, GEOGIS

---

**Última atualização:** 2026-01-10
