# Tenant (Instituição Cliente)

Entidade aggregate root central representando instituição cliente no sistema multi-tenant onde cada tenant corresponde a uma organização (prefeitura, órgão estadual, empresa de topografia) com dados completamente isolados via Row-Level Security garantindo que nenhum tenant acesse dados de outro. Campos conceituais incluem identificador único global, nome da instituição, slug de domínio único usado em URLs (iterj, prefeitura-rio, topografia-xyz), status ativo/inativo controlando acesso ao sistema, data de criação para auditoria, URL opcional de logotipo personalizado exibido na interface, configuração de tema JSON permitindo customização de cores e estilos sem código (primary_color brand_logo_url menu_layout), e quota de armazenamento em gigabytes limitando uploads de documentos e fotos. Relacionamentos incluem tem múltiplos Accounts usuários do sistema (1:N onde cada usuário pertence a exatamente um tenant), tem múltiplas Communities comunidades cadastradas (1:N onde comunidades são isoladas por tenant), tem múltiplas Teams equipes de trabalho (1:N organizando usuários em grupos), e opcionalmente tem configurações específicas armazenadas em tabelas auxiliares (configurações de integração, preferências de relatório). Regras de negócio estabelecem que slug de domínio deve ser único globalmente no sistema (usado em login e rotas), ao desativar tenant (active=false) todos os usuários vinculados perdem acesso imediatamente, queries no banco de dados são automaticamente filtradas por tenant_id via RLS (Row-Level Security) impedindo vazamento de dados entre tenants, quota de armazenamento quando atingida bloqueia novos uploads até expansão ou limpeza, tema JSON deve seguir schema validado evitando configurações inválidas que quebrem interface, e criação de novo tenant dispara provisionamento inicial (criação de schema se multi-schema, configuração de roles de banco, criação de usuário administrador padrão). Workflow típico inicia com signup de novo cliente criando tenant com slug único, configuração inicial de tema e preferências, criação de primeiro usuário administrador, e ativação do tenant liberando acesso. Tenant é imutável após criação no sentido de que slug não pode ser alterado (apenas desativação/reativação), e soft delete não é aplicado (tenant desativado permanece no banco para auditoria e possível reativação futura). Sistema suporta crescimento ilimitado de tenants sem reorganização de estrutura, e futuramente permitirá múltiplos planos (free, pro, enterprise) com quotas e features diferenciadas, mas atualmente todos os tenants têm acesso completo ao sistema interno.

**Módulos:** GEOAPI, GEOWEB, REURBCAD, GEOGIS

---

**Última atualização:** 2026-01-10
**Status do arquivo**: Pronto
