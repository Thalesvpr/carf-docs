# UnitHolder (Vínculo Unidade-Titular)

Entidade junction representando relacionamento N:N entre Unit unidade habitacional e Holder titular pessoa física com metadados de propriedade definindo tipo de vínculo, percentual de propriedade e período de validade. Campos conceituais incluem identificador único global, unit_id referenciando unidade habitacional, holder_id referenciando titular pessoa física, relationship_type enum especificando natureza do vínculo (OWNER proprietário legal, SPOUSE cônjuge do proprietário, RESIDENT morador sem propriedade, POSSESSOR possuidor sem título, HEIR herdeiro em processo sucessório), ownership_percentage decimal opcional indicando fração da propriedade quando aplicável (50.00 para meação, 33.33 para três coproprietários, NULL para RESIDENT que não é proprietário), is_primary_holder booleano flag indicando titular principal para fins de comunicação e priorização em documentos oficiais (exatamente um por unidade), started_at timestamp indicando início do vínculo (data de aquisição, início da posse, início da moradia) permitindo rastreamento temporal, ended_at timestamp opcional indicando fim do vínculo (venda, falecimento, mudança) transformando relacionamento de ativo para histórico, observações textuais opcionais documentando detalhes do vínculo ou situação especial, e metadados de auditoria. Relacionamentos conectam Unit (N:1) e Holder (N:1) formando many-to-many onde Unit pode ter múltiplos Holders e Holder pode estar vinculado a múltiplas Units (casos de pessoa possuindo múltiplas propriedades na mesma comunidade ou comunidades diferentes). Regras de negócio estabelecem que soma de ownership_percentage para mesma Unit não pode exceder 100.00 exceto em casos documentados via observações (situações jurídicas complexas de sobreposição de direitos), exatamente um Holder por Unit deve ter is_primary_holder=true (sistema impede remoção ou alteração do último primary sem designar novo), relationship_type OWNER ou POSSESSOR requer ownership_percentage maior que zero enquanto RESIDENT e SPOUSE podem ter NULL indicando moradia sem propriedade, ended_at NULL significa vínculo ativo e ended_at preenchido indica histórico (queries de holders ativos filtram por ended_at IS NULL), e soft delete da junction é evitado preferindo ended_at para preservar rastreabilidade temporal completa de quem teve vínculo com unidade em qual período. Workflow típico inicia com cadastro inicial de Unit onde field agent vincula pelo menos um Holder com relationship_type OWNER ou POSSESSOR e is_primary_holder=true, preenchimento de ownership_percentage refletindo documentação apresentada (100% se único proprietário, 50% se casal em regime de comunhão total), adição de Holder adicional quando identificado cônjuge ou coproprietário criando novo UnitHolder com relationship_type e ownership apropriados, validação por analista verificando que soma de ownership não excede 100% e que documentação suporta vínculos declarados, e atualização temporal quando titular vende propriedade ou falece preenchendo ended_at no vínculo existente e opcionalmente criando novo vínculo para adquirente ou herdeiro. Sistema suporta sucessão hereditária mantendo vínculo original do falecido com ended_at=data_falecimento e criando novos vínculos para herdeiros com relationship_type=HEIR e ownership_percentage dividido conforme inventário, separação conjugal atualizando ownership_percentage de cônjuges conforme decisão judicial ou acordo, e regularização de posse convertendo relationship_type de POSSESSOR para OWNER quando processo de legitimação é aprovado e certidão emitida. Primary holder é usado como contato principal para notificações oficiais, nome exibido em primeiro lugar em relatórios e documentos, e responsável legal para assinatura de termos e autorizações, sistema garante transição suave de primary holder permitindo administrador designar novo primary antes de remover antigo evitando estado inconsistente.

**Módulos:** GEOAPI, GEOWEB, REURBCAD, GEOGIS

---

**Última atualização:** 2026-01-10
**Status do arquivo**: Pronto
