# LayerFeature (Geometria Individual em Camada)

Entidade representando geometria individual (ponto linha ou polígono) dentro de camada vetorial customizada armazenando tanto informação espacial quanto atributos descritivos permitindo usuários criarem dados geoespaciais customizados complementando informações base do sistema. Campos conceituais incluem identificador único global, layer_id referenciando Layer pai que agrupa features tematicamente relacionadas, geometry geometria espacial formatada conforme especificação de geometrias do sistema (Point LineString Polygon MultiPoint MultiLineString MultiPolygon) armazenando coordenadas e tipo geométrico, properties JSON estruturado armazenando atributos descritivos da feature onde chaves são nomes de campos (nome, tipo, diametro_cm, material, ano_instalacao) e valores são dados correspondentes permitindo esquema flexível que varia conforme tipo de camada sem necessidade de alterar modelo de dados, feature_index inteiro opcional indicando ordem de exibição ou processamento dentro da camada útil para features sequenciais como trechos de via numerados, created_by referenciando Account do usuário que criou feature rastreando responsabilidade, created_at timestamp de criação, updated_at timestamp de última modificação refletindo edições de geometria ou atributos, e deleted_at timestamp de soft delete permitindo recuperação de features deletadas acidentalmente. Relacionamentos incluem pertence obrigatoriamente a uma Layer (N:1 agrupamento temático), e foi criada por Account (N:1 rastreabilidade). Regras de negócio estabelecem que geometry deve ser válida conforme especificação de geometrias geoespaciais (polígonos fechados sem auto-interseções linestrings com ao menos 2 pontos pontos com coordenadas válidas), tipo de geometry deve ser compatível com Layer.geometry_type validando que feature POINT só pode ser adicionada a layer com geometry_type POINT ou MULTIPOINT prevenindo inconsistências, properties pode ter estrutura livre mas camadas frequentemente definem schema sugerido documentado em Layer.metadata orientando usuários sobre campos esperados e tipos de dados, coordenadas devem estar dentro de bounds geograficamente plausíveis (por exemplo Brasil ou região de interesse do tenant) rejeitando coordenadas claramente inválidas como latitude 500, e soft delete preserva histórico de features mesmo após exclusão permitindo auditoria de mudanças e recuperação via undelete. Uso típico permite ADMIN criar feature representando poste de energia elétrica na camada Rede Elétrica com geometry tipo POINT e properties contendo número do poste tipo de transformador potência e data de instalação, analista criar feature de trecho de via na camada Vias com geometry tipo LINESTRING e properties contendo nome da rua largura pavimentação e hierarquia viária, gestor delimitar área de risco na camada Áreas de Risco com geometry tipo POLYGON e properties descrevendo tipo de risco (deslizamento inundação) grau de severidade e medidas mitigadoras recomendadas, e técnico de campo marcar pontos de interesse durante levantamento topográfico usando aplicativo mobile para posterior importação como features de camada customizada. Sistema valida geometria ao criar ou editar feature rejeitando geometrias inválidas com mensagem de erro específica indicando problema (polígono não fechado auto-interseção coordenadas fora de bounds), renderiza features em mapa aplicando estilo definido em Layer.style_json mas permitindo sobrescritas por feature via propriedade especial style em properties JSON, permite consultas espaciais como buscar todas features a menos de 100m de Unit específica ou dentro de Community boundary apoiando análises de proximidade e contenção, e exporta features junto com Layer ao gerar arquivo GeoJSON ou Shapefile preservando geometrias e todos atributos em properties. Features de camadas customizadas complementam entities principais do sistema (Units Holders Communities) fornecendo flexibilidade para representar dados geográficos específicos de contexto local, diferenciam-se de Units que são properties em processo de regularização com workflow status e validações específicas enquanto LayerFeatures são dados geográficos auxiliares criados livremente sem workflow associado, e permitem integração com ferramentas GIS externas onde usuários podem criar features em software GIS desktop exportar como GeoJSON e importar para sistema ou vice-versa facilitando intercâmbio de dados espaciais.

**Módulos:** GEOAPI, GEOWEB, REURBCAD, GEOGIS

---

**Última atualização:** 2026-01-10
