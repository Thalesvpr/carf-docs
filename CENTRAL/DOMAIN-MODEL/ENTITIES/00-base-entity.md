# BaseEntity (Entidade Base)

Classe base abstrata conceitual que todas entidades de domínio herdam fornecendo campos comuns essenciais para identificação auditoria temporal soft delete e controle de concorrência otimista. Campos conceituais incluem identificador único global imutável gerado na criação servindo como chave primária, timestamp de criação automático registrando quando entidade foi criada, timestamp de última atualização automático registrando quando foi modificada pela última vez, timestamp de exclusão lógica nullable indicando se entidade foi soft deleted (null se ativa não-null se excluída), e token de versão para controle de concorrência otimista detectando modificações concorrentes. Comportamentos comuns incluem método Touch atualizando timestamp de última atualização chamado automaticamente em toda modificação, método SoftDelete marcando entidade como excluída preenchendo timestamp de exclusão sem remover fisicamente do banco, propriedades Now e Today injetáveis retornando data/hora atual permitindo testes determinísticos com datas fixas, e comparação de igualdade por identificador único ao invés de referência de memória onde duas instâncias com mesmo ID são consideradas mesma entidade. Regras de negócio estabelecem que identificador único deve ser gerado uma única vez na criação e nunca alterado garantindo estabilidade de referências, timestamp de criação deve ser imutável registrando momento exato de criação, timestamp de atualização deve ser atualizado automaticamente em todo SaveChanges não manualmente, soft delete é preferencial ao hard delete para manutenção de histórico e auditoria permitindo recuperação se necessário, token de versão deve ser verificado antes de persistir mudanças lançando exception de concorrência se outro usuário modificou entre read e write, queries padrão devem filtrar entidades soft deleted automaticamente usando global filter não retornando registros excluídos exceto em queries explícitas de histórico, e todos timestamps devem usar UTC evitando problemas de timezone garantindo consistência global. Implementação varia por tecnologia onde backend .NET usa Guid para ID DateTime para timestamps byte array RowVersion para token de versão, frontend TypeScript usa string UUID para ID string ISO8601 para dates número ou string para versão, mobile React Native usa string ID número timestamp Unix para dates string versão, e Python usa UUID para ID datetime timezone-aware para timestamps string hash para versão. Auditoria temporal fornece rastreamento completo de quando entidade foi criada modificada excluída por quem se integrado com campo adicional de usuário, permite reconstrução de estado histórico aplicando mudanças cronologicamente, facilita compliance com LGPD rastreando ciclo de vida de dados pessoais, e suporta queries de audit trail mostrando timeline de mudanças de entidade específica.

**Módulos:** Todos os projetos (classe base fundamental)

---

**Última atualização:** 2026-01-10
**Status do arquivo**: Pronto
