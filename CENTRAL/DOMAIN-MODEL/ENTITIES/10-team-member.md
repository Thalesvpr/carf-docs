# TeamMember (Membro de Equipe)

Entidade junction representando relacionamento N:N entre Account e Team com role específico dentro da equipe definindo nível de autoridade e responsabilidades. Campos conceituais incluem identificador único global, team_id referenciando equipe à qual membro pertence, account_id referenciando usuário que é membro, team_role enum especificando papel dentro da equipe (LEADER ou MEMBER), data de ingresso timestamp registrando quando usuário foi adicionado à equipe para auditoria de histórico, e soft delete timestamp opcional (left_at ou deleted_at) permitindo rastrear quando membro saiu ou foi removido. Relacionamentos são simples junction table conectando Team (N:1) e Account (N:1) formando relacionamento many-to-many, onde um Account pode ser membro de múltiplas Teams e uma Team possui múltiplos Accounts. Regras de negócio estabelecem que LEADER tem permissões elevadas dentro do contexto da equipe incluindo adicionar/remover membros, modificar CommunityAuthorizations da equipe, e gerenciar atribuições de trabalho, enquanto MEMBER herda acesso às comunidades autorizadas para a equipe mas não pode modificar estrutura ou permissões, sistema garante que ao menos um LEADER existe por equipe impedindo remoção do último (validação ao deletar TeamMember com team_role=LEADER verifica se existem outros leaders), mesmo Account pode ser LEADER em uma equipe e MEMBER em outra refletindo diferentes níveis de responsabilidade em contextos distintos, e soft delete preserva histórico completo de participação (importante para auditoria de quem teve acesso a quais comunidades em qual período). Workflow típico inicia com LEADER ou ADMIN da equipe convidando novo membro especificando role inicial (geralmente MEMBER para field agents, ocasionalmente LEADER para supervisores), Account aceita convite ou é adicionado diretamente, membro passa a ter acesso às comunidades autorizadas para sua equipe refletido imediatamente em próximo login ou sincronização mobile, e futuramente sistema pode enviar notificação ao Account informando adição à equipe. Remoção de membro ocorre por decisão de LEADER ou auto-remoção (deixar equipe), soft delete registra timestamp de saída preservando histórico, e Account perde acesso às comunidades que eram exclusivas daquela equipe (se não tiver CommunityAuthorization individual ou via outra equipe). Sistema suporta promoção de MEMBER para LEADER atualizando team_role sem criar novo registro (preserva joined_at original), e rebaixamento de LEADER para MEMBER segue mesma lógica com validação de que não é o último leader.

**Módulos:** GEOAPI, GEOWEB, REURBCAD, GEOGIS

---

**Última atualização:** 2026-01-10
**Status do arquivo**: Review
