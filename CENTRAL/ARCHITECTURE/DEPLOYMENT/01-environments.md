# Environments

Ambientes separados do CARF (dev, staging, prod) com configurações isoladas garantindo progressão controlada de releases conforme [ADR-020: Docker + Kubernetes](../ADRs/ADR-020-docker-kubernetes-orchestration.md) orquestrando deployments. Dev ambiente para desenvolvimento contínuo com deploy automático em push main branch, dados sintéticos resetáveis, feature flags habilitadas por padrão, logs debug verbosos, e SSL self-signed. Staging ambiente pré-produção espelhando prod com dados anonimizados de produção, deploy manual após approval QA, smoke tests automatizados validando funcionalidades críticas, e SSL válido wildcard. Prod ambiente produção com deploy blue-green zero-downtime, dados reais multi-tenant isolados via RLS conforme [ADR-005](../ADRs/ADR-005-multi-tenancy-rls.md), monitoramento 24/7 Prometheus/Grafana, backups automáticos cross-region, SSL Let's Encrypt auto-renovado, e rollback automático se healthcheck falhar. Configurações gerenciadas via environment variables (DATABASE_URL, KEYCLOAK_REALM_URL, JWT_SECRET_KEY, REDIS_URL, RABBITMQ_URL) injetadas via Kubernetes ConfigMaps/Secrets ou .env files local, jamais hardcoded no código, versionadas separadamente por ambiente em repositório privado infra configs, e validadas em startup falhando fast se obrigatórias faltarem.

## Projetos Deployados Nestes Ambientes

Todos os projetos CARF seguem estratégia tri-ambiente (Dev/Staging/Prod) documentada aqui, com implementação específica por projeto em [GEOAPI Deployment](../../../PROJECTS/GEOAPI/DOCS/ARCHITECTURE/05-deployment.md) para backend .NET hospedado em Kubernetes cluster gerenciado executando pods com HPA horizontal scaling, [GEOWEB Deployment](../../../PROJECTS/GEOWEB/DOCS/README.md) para frontend React Vite deployado via [Vercel](../ADRs/ADR-013-vercel-deployment-platform.md) com preview deploys automáticos em PRs, [REURBCAD Deployment](../../../PROJECTS/REURBCAD/DOCS/README.md) para mobile React Native com EAS builds distribuindo via App Store Google Play com environment-specific configs, [KEYCLOAK Deployment](../../../PROJECTS/KEYCLOAK/DOCS/README.md) para auth provider multi-tenant com realm por município segregando users via [multi-tenancy model](../ADRs/ADR-005-multi-tenancy-rls.md), [WEBDOCS Deployment](../../../PROJECTS/WEBDOCS/DOCS/ARCHITECTURE/05-deployment.md) para site estático Astro Starlight servido via Vercel CDN com builds rápidos conforme [ADR-016](../ADRs/ADR-016-astro-starlight-documentation.md), e [ADMIN Deployment](../../../PROJECTS/ADMIN/DOCS/ARCHITECTURE/01-overview.md) para console administrativo Next.js com server-side rendering.

---

**Última atualização:** 2026-01-10
