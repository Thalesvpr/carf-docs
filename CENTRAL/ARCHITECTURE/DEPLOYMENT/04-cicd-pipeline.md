# CI/CD Pipeline

Pipeline CI/CD do CARF via [GitHub Actions](../ADRs/ADR-017-github-actions-cicd.md) executando build/test/deploy automatizado com gates de qualidade. Build stage compilando GEOAPI (.NET 9 Release mode conforme [ADR-001](../ADRs/ADR-001-dotnet-9-backend.md)), bundling GEOWEB (Vite build conforme [ADR-012](../ADRs/ADR-012-vite-bundler-frontend.md)), linting TypeScript/C# com zero warnings tolerados, e caching dependencies (NuGet, npm) via [Bun](../ADRs/ADR-007-bun-runtime-bundler.md) reduzindo tempo build de 10min para 3min. Test stage rodando unit tests (coverage >80% obrigatório), integration tests contra banco Postgres testcontainers, e2e tests [Playwright](../ADRs/ADR-018-playwright-e2e-testing.md) simulando fluxos críticos (login, cadastrar unidade, gerar relatório), com falha de qualquer test bloqueando pipeline. Security stage escaneando dependências vulneráveis (Dependabot alerts), análise estática SAST (SonarQube identificando SQL injection, XSS), scan imagem Docker (Trivy bloqueando high/critical CVEs), e secret scanning evitando commit de credentials. Deploy stage buildando imagem Docker taggeada (sha, semver), pushing para registry, atualizando manifests Kubernetes (kustomize substituindo image tag), e aplicando via kubectl apply com wait até rollout completo. Ambientes seguem progressão dev (auto-deploy push main) → staging (manual approval após QA) → prod (manual approval após staging validado + change request aprovado) conforme [01-environments.md](./01-environments.md). Rollback automático se healthcheck degradar após deploy detectado via Prometheus queries (error rate >1%, latency p99 >500ms), notificações Slack alertando equipe, e post-mortem obrigatório documentando causa raiz.

## Projetos no Pipeline

Pipeline GitHub Actions automatiza builds de [GEOAPI](../../../PROJECTS/GEOAPI/DOCS/ARCHITECTURE/05-deployment.md) executando `dotnet build` e `dotnet test --collect:"XPlat Code Coverage"` com coverage mínimo 80% exigido antes push para registry Docker, [GEOWEB](../../../PROJECTS/GEOWEB/DOCS/README.md) com `bun run build` via [Vite](../ADRs/ADR-012-vite-bundler-frontend.md) gerando bundle otimizado deployado via [Vercel](../ADRs/ADR-013-vercel-deployment-platform.md) integration, [REURBCAD](../../../PROJECTS/REURBCAD/DOCS/README.md) usando EAS Build cloud service para compilar APK/IPA com code signing automático conforme [mobile deployment](./05-mobile-deployment.md), [KEYCLOAK](../../../PROJECTS/KEYCLOAK/DOCS/README.md) empacotando temas customizados em imagem Docker, bibliotecas TypeScript [@carf/tscore](../../../PROJECTS/LIB/TS/TSCORE/DOCS/README.md) publicando NPM packages no GitHub Packages quando release tag é criada, e link validation rodando `check-links.py` em todos PRs garantindo zero links quebrados conforme documentado em [README.md conventions](../../../README.md).

---

**Última atualização:** 2026-01-10
