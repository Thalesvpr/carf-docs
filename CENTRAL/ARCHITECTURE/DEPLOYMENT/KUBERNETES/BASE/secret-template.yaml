apiVersion: v1
kind: Secret
metadata:
  name: carf-secrets
  labels:
    app: carf
    component: secrets
type: Opaque
stringData:
  # IMPORTANT: Never commit real values to version control
  # Use External Secrets Operator in production to sync from:
  # - Azure Key Vault
  # - AWS Secrets Manager
  # - HashiCorp Vault
  # - Google Secret Manager

  # PostgreSQL
  postgres-user: "<REPLACE_WITH_SECURE_USERNAME>"
  postgres-password: "<REPLACE_WITH_SECURE_PASSWORD>"

  # Database Connection URL
  # Format: postgres://user:password@host:port/database
  database-url: "postgres://<USER>:<PASSWORD>@postgres-0.postgres-headless:5432/carf"

  # JWT Secret (256-bit base64 encoded)
  # Generate with: openssl rand -base64 32
  jwt-secret: "<REPLACE_WITH_256_BIT_BASE64_KEY>"

  # Keycloak Admin
  keycloak-admin-password: "<REPLACE_WITH_SECURE_ADMIN_PASSWORD>"

  # RabbitMQ
  rabbitmq-user: "<REPLACE_WITH_RABBITMQ_USER>"
  rabbitmq-pass: "<REPLACE_WITH_SECURE_PASSWORD>"
  rabbitmq-url: "amqp://<USER>:<PASS>@rabbitmq-service:5672"

  # External Services
  sentry-dsn: "<REPLACE_WITH_SENTRY_DSN>"

  # SMTP (optional)
  smtp-username: "<REPLACE_WITH_SMTP_USERNAME>"
  smtp-password: "<REPLACE_WITH_SMTP_PASSWORD>"

  # S3/Storage (optional - prefer IAM roles in production)
  aws-access-key-id: "<REPLACE_WITH_AWS_ACCESS_KEY>"
  aws-secret-access-key: "<REPLACE_WITH_AWS_SECRET_KEY>"

  # External APIs
  serpro-client-id: "<REPLACE_WITH_SERPRO_CLIENT_ID>"
  serpro-client-secret: "<REPLACE_WITH_SERPRO_CLIENT_SECRET>"
  geocoding-api-key: "<REPLACE_IF_USING_GOOGLE_MAPS>"

---
# Example using External Secrets Operator (recommended for production)
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: carf-secrets
#   namespace: carf-system
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: azure-key-vault  # or aws-secrets-manager
#     kind: SecretStore
#   target:
#     name: carf-secrets
#     creationPolicy: Owner
#   data:
#   - secretKey: postgres-user
#     remoteRef:
#       key: postgres-user
#   - secretKey: postgres-password
#     remoteRef:
#       key: postgres-password
#   - secretKey: jwt-secret
#     remoteRef:
#       key: jwt-secret
#   # ... add all other secrets
