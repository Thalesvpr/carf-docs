# PROD

Overlay Kubernetes para ambiente de produção implementa configurações robustas garantindo alta disponibilidade confiabilidade e segurança do sistema CARF atendendo SLA de noventa e nove ponto nove por cento uptime através de redundância autoscaling e health checks agressivos. Arquivo kustomization.yaml referencia bases ../../base aplicando replicas patch para três réplicas mínimas garantindo tolerância a falhas e distribuição de carga, commonLabels environment igual prod identificando recursos produção, namespace carf-prod isolando completamente de dev staging, images setting tags específicos como v1.2.3 garantindo imutabilidade e rollback confiável ao invés de latest tags mutáveis.

Configurações de resources definem requests e limits precisos onde GEOAPI requests quinhentos millicores CPU quinhentos e doze MiB memory garantindo scheduling adequado e limits mil millicores um GiB prevenindo consumo excessivo e impacto em outros pods, HPA Horizontal Pod Autoscaler configurado minReplicas três maxReplicas dez com targetCPU setenta por cento escalando automaticamente baseado em carga mantendo performance sob picos de tráfego, PodDisruptionBudget minAvailable dois garantindo que sempre no mínimo dois pods permanecem running durante node drains ou rolling updates evitando downtime completo, liveness e readiness probes com parâmetros agressivos initialDelaySeconds trinta periodSeconds dez timeoutSeconds cinco failureThreshold três detectando falhas rapidamente e removendo pods unhealthy do load balancer, RollingUpdate strategy maxUnavailable um maxSurge um permitindo atualizações graduais sem downtime onde novos pods são criados antes de terminar antigos validando saúde antes de continuar rollout, PriorityClass high garantindo scheduling prioritário em cenários de resource contention onde produção tem precedência sobre dev staging.

Secrets gerenciados via External Secrets Operator integrando com AWS Secrets Manager Azure Key Vault buscando credenciais database Keycloak JWT automaticamente sincronizando como Kubernetes Secrets sem armazenar plaintext em manifests Git garantindo rotação centralizada auditoria e compliance LGPD, Ingress configurado com TLS usando cert-manager anotações provisionando automaticamente certificados Let's Encrypt com renovação automática noventa dias antes de expiração garantindo HTTPS válido sem intervenção manual, persistent volumes usando cloud storage classes como gp3 EBS AWS ou premium-rw Azure Disk com replication garantindo durabilidade dados database PostgreSQL com snapshots automáticos diários retention trinta dias permitindo disaster recovery point-in-time restore.

---

**Última atualização:** 2026-01-10
