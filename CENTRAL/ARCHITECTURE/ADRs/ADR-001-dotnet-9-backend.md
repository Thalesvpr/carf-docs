# ADR-001: Escolha do .NET 9 para Backend

Decisão arquitetural escolhendo .NET 9 como plataforma principal para desenvolvimento do backend GEOAPI justificada por performance superior em workloads geoespaciais intensivos onde benchmarks demonstram throughput 3-5x maior que Node.js em operações com PostGIS devido a compilação AOT (Ahead-of-Time) e otimizações nativas de runtime, ecossistema maduro com Entity Framework Core oferecendo suporte first-class para PostgreSQL spatial types através de Npgsql.EntityFrameworkCore.PostgreSQL e NetTopologySuite permitindo queries espaciais type-safe com LINQ sem necessidade de SQL raw, segurança robusta com ASP.NET Core Identity integrado nativamente com Keycloak via IdentityServer permitindo OAuth2/OIDC sem bibliotecas third-party instáveis, strong typing com C# eliminando classes inteiras de bugs em runtime comuns em JavaScript especialmente em manipulação de geometrias complexas e cálculos de área/perímetro onde erros de tipo causam inconsistências silenciosas, garbage collector de baixa latência otimizado para cargas server-side com pausas sub-millisegundo mesmo sob alta carga mantendo P99 de latência abaixo de 50ms conforme requisitos não-funcionais RNF-001 e RNF-002, suporte nativo a async/await desde inception da linguagem permitindo concorrência eficiente em I/O-bound operations como queries de banco e chamadas a APIs externas sem callback hell ou complexidade de promises, deployment simplificado com containers Docker oficiais otimizados pela Microsoft com imagens Alpine Linux minimalistas reduzindo surface de ataque e tamanho de imagem para ~100MB versus ~200MB de Node.js equivalente, observabilidade integrada com OpenTelemetry e Application Insights permitindo tracing distribuído entre GEOAPI GEOWEB REURBCAD sem instrumentação manual complexa, hot reload durante desenvolvimento acelerando ciclo de feedback, e ecossistema corporativo com suporte enterprise da Microsoft garantindo patches de segurança e atualizações LTS (Long Term Support) até 2027 alinhado com ciclo de vida do projeto CARF estimado em 5+ anos.

Alternativas consideradas incluem Node.js (rejeitado por performance inferior em workloads CPU-intensive especialmente cálculos geoespaciais e tipagem fraca causando bugs em produção), Java Spring Boot (rejeitado por verbosidade excessiva reduzindo produtividade da equipe e configuração complexa de spatial extensions), Python FastAPI (rejeitado por GIL limitando concorrência real e performance inferior em alta carga apesar de sintaxe elegante), e Go (rejeitado por ecossistema imaturo de bibliotecas geoespaciais e ausência de ORM robusto equivalente a EF Core dificultando desenvolvimento rápido).

Consequências positivas incluem performance consistente sob alta carga permitindo atender 10000+ usuários simultâneos conforme RNF-011, redução de bugs em produção devido a strong typing e compile-time checks, produtividade alta da equipe familiarizada com C# e padrões enterprise, integração nativa com ferramentas Microsoft (Visual Studio, Azure DevOps) utilizadas pela organização, e facilidade de recrutamento de desenvolvedores .NET em mercado brasileiro. Consequências negativas incluem curva de aprendizado para desenvolvedores júnior vindos de JavaScript, lock-in parcial no ecossistema Microsoft apesar de .NET Core ser open-source e cross-platform, overhead de memória ligeiramente maior que Go (~30MB baseline vs ~10MB) mas aceitável dado requisitos RNF-013, e custo de licensing zero por ser .NET Core mas possível pressão futura para adoção de ferramentas pagas Microsoft.

Status da decisão é aprovado e implementado desde início do projeto em 2024-Q3, com revisão prevista apenas se surgir tecnologia disruptiva que altere fundamentalmente cenário de performance ou se equipe decidir migrar para arquitetura serverless onde cold start de .NET pode ser desvantajoso comparado a alternativas como Go.

---

**Data:** 2024-09-15
**Status:** Aprovado e Implementado
**Decisor:** Equipe de Arquitetura
**Última revisão:** 2025-01-05
