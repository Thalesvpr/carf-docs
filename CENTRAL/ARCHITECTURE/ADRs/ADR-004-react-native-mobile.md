# ADR-004: Escolha do React Native para Aplicação Mobile

Decisão arquitetural escolhendo React Native para desenvolvimento do aplicativo mobile REURBCAD justificada por code reuse de 70-80% entre iOS e Android eliminando necessidade de equipes separadas e reduzindo custo de desenvolvimento e manutenção em 40-50% comparado a desenvolvimento nativo puro, ecossistema JavaScript permitindo compartilhamento de lógica de negócio tipos TypeScript e utilitários com frontend web GEOWEB através de workspace monorepo reduzindo duplicação e inconsistências, comunidade massiva com ~500k developers globalmente garantindo disponibilidade de bibliotecas para requisitos comuns (mapas offline validação formulários sincronização) sem necessidade de implementação from scratch, React como paradigma de UI declarativa já dominado por equipe frontend reduzindo curva de aprendizado comparado a SwiftUI ou Jetpack Compose que exigiriam ramp-up de meses, Hot Reload e Fast Refresh acelerando ciclo de desenvolvimento permitindo iteração rápida de UI em segundos versus minutos de rebuild em apps nativos aumentando produtividade em 30-40%, Expo SDK fornecendo APIs unificadas para features nativas críticas (câmera GPS armazenamento local notificações) com fallback automático eliminando necessidade de código específico por plataforma, Over-the-Air (OTA) updates via Expo permitindo deployment de correções críticas e features não-nativas sem passar por review lenta de App Store (~1-3 dias) e Google Play (~1-2 dias) habilitando resposta rápida a bugs em produção, JavaScript bridge otimizado com Hermes engine (iOS) e V8 (Android) garantindo performance adequada para UI complexa com mapas e formulários mantendo 60fps conforme RNF-004, e suporte first-class a offline-first architecture através de bibliotecas maduras (WatermelonDB React Native MMKV) alinhado com requisito crítico RF-073 de coleta offline em áreas sem conectividade.

React Native 0.76+ especificamente introduz New Architecture com Fabric renderer eliminando overhead de JavaScript bridge em operações síncronas críticas melhorando performance de scrolling e animações em 30-40%, TurboModules permitindo lazy loading de módulos nativos reduzindo tempo de startup inicial, e Concurrent Features do React 18 habilitando suspense e transitions para UX responsiva mesmo durante operações pesadas como sincronização de milhares de registros.

Expo SDK 52/53 adiciona expo-sqlite com suporte a Web Assembly acelerando queries locais em 2-3x especialmente relevante para busca offline de unidades cadastradas, expo-camera com ML Kit integration permitindo OCR de documentos diretamente no app facilitando captura de CPF/CNPJ de documentos físicos, e expo-dev-client permitindo builds de desenvolvimento customizados mantendo benefícios de Hot Reload mesmo com módulos nativos customizados.

Alternativas consideradas incluem Flutter (rejeitado por linguagem Dart exigindo aprendizado completo de nova stack sem reuso de conhecimento JavaScript da equipe e ecossistema menor com ~150k developers dificultando recrutamento), desenvolvimento nativo puro Swift/Kotlin (rejeitado por duplicação total de código entre plataformas dobrando custo e tempo de desenvolvimento além de exigir duas equipes especializadas), Ionic/Capacitor (rejeitado por performance inferior em UI complexa especialmente mapas interativos e animações ficando aquém de requisitos RNF-004 sobre responsividade), PWA (Progressive Web App rejeitado por acesso limitado a features nativas críticas como câmera com alta resolução GPS em background e armazenamento ilimitado offline além de UX inferior em mobile), e Xamarin (rejeitado por futuro incerto pós-MAUI e comunidade em declínio com Microsoft focando em MAUI que ainda é imaturo).

Consequências positivas incluem velocidade de desenvolvimento com single codebase reduzindo time-to-market em 40-50%, custo reduzido com equipe única JavaScript eliminando necessidade de contratar especialistas iOS e Android separadamente, consistência de UX entre plataformas garantindo experiência uniforme para usuários independente de dispositivo, atualizações rápidas via OTA permitindo correção de bugs críticos em horas versus dias de review de stores, ecosistema rico com bibliotecas para requisitos comuns (react-native-maps react-native-camera WatermelonDB) acelerando desenvolvimento, e facilidade de onboarding de novos desenvolvedores dado popularidade de React. Consequências negativas incluem performance ligeiramente inferior a nativo puro em operações computacionalmente intensivas como processamento de imagens de alta resolução (mitigado processando no backend via API), tamanho de bundle maior (~30-40MB vs ~10-15MB nativo) aumentando download inicial (aceitável com 4G/5G ubíquo), dependência de JavaScript bridge introduzindo latência de ~5-10ms em chamadas nativas críticas (mitigado com New Architecture), necessidade ocasional de módulos nativos customizados exigindo conhecimento de Swift/Kotlin para features específicas, e debugging mais complexo quando problemas envolvem interação JavaScript-nativo.

Configuração específica escolhida utiliza React Native 0.76.0 com New Architecture habilitada, Expo SDK 52 para managed workflow maximizando produtividade, Hermes engine habilitado em iOS e Android para melhor performance, TypeScript strict mode garantindo type safety, React Navigation 6.x para navegação declarativa, WatermelonDB para database offline performático suportando sincronização incremental, React Native MMKV para cache rápido de configurações e tokens, react-native-maps com MapLibre backend para mapas offline, e Expo EAS Build para CI/CD automatizado gerando builds iOS e Android em cloud.

Status da decisão é aprovado e implementado desde início do projeto em 2024-Q3, com revisão prevista se performance de New Architecture não atender requisitos após testes em dispositivos low-end (improvável dado benchmarks promissores) ou se surgir framework fundamentalmente superior (improvável dado domínio de React Native em 2024).

---

**Data:** 2024-09-15
**Status:** Aprovado e Implementado
**Decisor:** Equipe de Arquitetura + Mobile
**Última revisão:** 2025-01-05
**Última atualização:** 2026-01-15
**Status do arquivo**: Pronto
