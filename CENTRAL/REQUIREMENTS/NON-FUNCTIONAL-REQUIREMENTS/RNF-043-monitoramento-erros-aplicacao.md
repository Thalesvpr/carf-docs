---
modules: [GEOAPI, GEOWEB, REURBCAD]
epic: security
---

# RNF-043: Monitoramento de Erros

Todos os módulos do sistema devem implementar captura e reportagem automática de erros de aplicação através de ferramentas especializadas como Sentry, Rollbar ou similar, permitindo identificação rápida de problemas em produção, análise de tendências de erros e priorização de correções baseada em frequência e impacto nos usuários. A integração com Sentry ou similar deve ser configurada em todos os ambientes de produção e staging, capturando automaticamente exceptions não tratadas, erros de JavaScript no frontend, crashes de aplicativo mobile e erros de API no backend, agrupando ocorrências similares para facilitar análise e evitar sobrecarga de alertas por milhares de instâncias do mesmo erro. Os stack traces completos são essenciais para debugging eficiente e devem incluir não apenas a pilha de chamadas que levou ao erro, mas também source maps no caso de frontend para mapear código minificado/transpilado de volta ao código-fonte original TypeScript ou JavaScript, permitindo que desenvolvedores identifiquem exatamente a linha de código problemática mesmo quando o código em produção foi otimizado e ofuscado. O contexto de usuário sem PII (Personally Identifiable Information) deve ser capturado para entender em que circunstâncias o erro ocorreu, incluindo informações como user ID (hash ou identificador interno, nunca CPF ou email), tenant ID para identificar qual organização foi afetada, versão da aplicação, tipo de navegador e sistema operacional, URL ou rota onde o erro ocorreu, e breadcrumbs mostrando ações que o usuário realizou antes do erro, mas explicitamente excluindo dados sensíveis como senhas, tokens, CPF, CNPJ ou qualquer informação que possa identificar pessoalmente o usuário em conformidade com LGPD. As tags e filtros customizados devem ser adicionados para facilitar análise, incluindo environment (production, staging, development), module (GEOAPI, GEOWEB, REURBCAD), feature flag status para correlacionar erros com features específicas, e custom tags relevantes ao domínio como community_id ou operation_type. Os critérios de aceitação incluem a integração completa com Sentry ou similar em todos os ambientes de produção e staging com DSN configurado e testado, a captura automática de exceptions com stack traces completos incluindo source maps para código transpilado, o registro de contexto de usuário incluindo user_id hasheado, tenant_id, versão da aplicação e breadcrumbs de navegação, a verificação de que nenhuma PII é enviada para o sistema de error tracking através de auditorias regulares e sanitização automática de dados sensíveis, e a configuração de alertas para erros de alta severidade ou novos erros que não foram vistos anteriormente. Este requisito é must-have por ser fundamental para observabilidade em produção, permitindo que a equipe de desenvolvimento seja notificada imediatamente quando problemas afetam usuários reais, identifique rapidamente a causa raiz através de stack traces e contexto detalhado, e priorize correções baseado em dados reais de frequência e impacto, reduzindo significativamente o mean time to detection (MTTD) e mean time to resolution (MTTR) de bugs em produção.
