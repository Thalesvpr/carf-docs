---
modules: [GEOAPI, GEOWEB]
epic: usability
---

# RNF-089: Timezone

Timestamps devem ser armazenados em UTC garantindo consistência temporal independentemente de localização geográfica de servidores ou usuários, onde padronização em Coordinated Universal Time elimina ambiguidades relacionadas a horário de verão e fusos horários regionais permitindo comparações e ordenações temporais confiáveis. A implementação deve configurar banco de dados para armazenar todas as colunas de timestamp em UTC garantindo que ao nível de persistência não há dependência de timezone local do servidor ou configuração regional, onde tipos de dados timestamp with time zone do PostgreSQL são utilizados armazenando internamente em UTC mas permitindo conversões transparentes para outros timezones quando necessário. O sistema deve realizar conversão para timezone local no frontend garantindo que usuários visualizam datas e horários em seu fuso horário regional, onde aplicações GEOWEB e REURBCAD detectam timezone do dispositivo através de APIs do navegador ou sistema operacional e aplicam conversão de UTC para horário local antes de renderizar timestamps em interfaces de usuário. A solução deve utilizar formato ISO 8601 para serialização de timestamps em APIs e exportações garantindo representação textual não ambígua incluindo offset de timezone, onde formato padrão YYYY-MM-DDTHH:mm:ss.sssZ é utilizado em respostas JSON permitindo parsing correto por qualquer cliente que implemente padrão ISO, onde Z indica UTC ou offset explícito como -03:00 para horário de Brasília é incluído quando timestamps são convertidos para timezone específico. A implementação deve tratar corretamente edge cases como transições de horário de verão onde em alguns fusos horários determinadas horas ocorrem duas vezes ou não existem, garantindo que lógica de conversão utiliza bibliotecas robustas como moment-timezone ou date-fns-tz que incluem database IANA de timezones com regras históricas e futuras de DST. Os critérios de aceitação incluem validação de que timestamps armazenados no banco são sempre UTC verificável através de queries diretas, onde APIs retornam timestamps em formato ISO 8601 com indicador Z ou offset apropriado, e interfaces de usuário exibem horários convertidos para timezone local do usuário com labels claros indicando fuso horário quando relevante para evitar confusão. A prioridade é classificada como must-have considerando que tratamento incorreto de timezones é fonte comum de bugs críticos em sistemas distribuídos e que dados de cadastro frequentemente incluem timestamps legalmente relevantes que devem ser representados sem ambiguidade.
**Última atualização:** 2026-01-15
**Status do arquivo**: Review
