---
modules: [GEOAPI, GEOWEB, REURBCAD]
epic: performance
---

# RNF-054: Busca Intuitiva

O sistema deve implementar funcionalidade de busca avançada com autocomplete e tolerância a erros tipográficos que permita aos usuários encontrar rapidamente unidades habitacionais, titulares, endereços ou comunidades sem necessidade de conhecer exatamente a grafia ou detalhes completos, melhorando produtividade e reduzindo frustração ao navegar grandes volumes de dados cadastrais. O autocomplete após 3 caracteres deve começar a mostrar sugestões assim que usuário digitou quantidade mínima de caracteres que permite filtrar significativamente o espaço de busca, ativando dropdown de sugestões abaixo do campo de input contendo resultados mais relevantes limitados tipicamente a 10-15 itens para evitar overwhelming, organizados por relevância com matching exato primeiro seguido de matching parcial, agrupados por tipo quando busca é global (ex: seção de "Unidades", seção de "Titulares", seção de "Endereços"), com highlight visual nos termos que matched a query do usuário facilitando scan rápido dos resultados, e suporte a navegação por teclado usando setas up/down para selecionar sugestão e Enter para confirmar. Os resultados em menos de 300ms são críticos para manter fluidez da interação e percepção de responsividade, implementando debouncing de 300ms onde requisição só é disparada após usuário parar de digitar por esse período evitando requests excessivos a cada keystroke, utilizando índices apropriados no banco de dados PostgreSQL incluindo índices GIN para full-text search em campos de texto e índices B-tree para campos de ID e chaves estrangeiras, implementando cache de queries frequentes no Redis para evitar hits repetidos ao banco, e considerando lazy loading onde primeiros resultados são retornados rapidamente e resultados adicionais são carregados em background se necessário. O highlight de termos buscados deve marcar visualmente as partes do texto que correspondem à query através de wrapping em tags HTML com styling diferenciado como background amarelo ou texto em negrito, implementado no frontend após receber resultados da API, funcionando tanto para matches exatos quanto parciais ou fuzzy matches, ajudando usuários a rapidamente identificar por que determinado resultado foi retornado e confirmar se é o que procuram. A tolerância a erros tipográficos deve ser implementada através de fuzzy matching que encontra resultados mesmo quando query contém pequenos erros de digitação, utilizando algoritmos como Levenshtein distance (limite de 1-2 caracteres de diferença), trigram similarity do PostgreSQL via extensão pg_trgm que calcula similaridade entre strings baseado em sequências de 3 caracteres, soundex ou metaphone para matching fonético em português que encontra nomes pronunciados similarmente mas escritos diferente, e normalização de texto removendo acentos, convertendo para lowercase e tratando variações comuns como "Silva" vs "da Silva", permitindo buscas menos precisas mas mais forgiving. A busca contextual deve considerar diferentes campos dependendo do tipo de entidade sendo buscada, onde busca de unidades habitacionais procura em número de cadastro, endereço (logradouro, número, bairro), nome do titular associado, CPF do titular (se usuário tem permissão), e código da comunidade, enquanto busca de titulares procura em nome completo, CPF (parcial ou completo), RG, data de nascimento, permitindo múltiplos pontos de entrada para encontrar mesma informação. Os critérios de aceitação incluem a ativação de autocomplete após usuário digitar pelo menos 3 caracteres com dropdown de sugestões aparecendo dinamicamente, a exibição de resultados em menos de 300ms medido via performance monitoring com percentil 95 considerando cache warm, o highlight visual dos termos buscados nos resultados retornados facilitando identificação rápida de matches, a implementação de fuzzy matching que encontra resultados mesmo com 1-2 erros tipográficos testado com casos comuns como "Joao" encontrando "João" ou "Silba" encontrando "Silva", e navegação de resultados via teclado usando setas e Enter sem necessidade de mouse. Este requisito é should-have por melhorar significativamente a usabilidade e eficiência dos usuários ao trabalhar com grandes volumes de dados, onde busca rápida e tolerante reduz tempo gasto procurando registros e frustrações com erros de digitação, especialmente valioso em contexto de atendimento presencial onde agilidade é importante, embora implementação de fuzzy matching e autocomplete performático adicione complexidade técnica de indexação e query optimization que requer tuning cuidadoso para não impactar negativamente performance geral do sistema.
