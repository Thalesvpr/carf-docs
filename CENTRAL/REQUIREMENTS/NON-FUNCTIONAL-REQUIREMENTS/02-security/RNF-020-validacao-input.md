---
modules: [GEOAPI, GEOWEB]
epic: security
---

# RNF-020: Validação de Input

Todo input recebido de usuários através de qualquer interface do sistema GEOMAP5 deve ser rigorosamente validado e sanitizado antes de qualquer processamento ou armazenamento, garantindo proteção contra ataques de injeção de código e manipulação maliciosa de dados. A validação deve ser implementada no módulo GEOAPI através da biblioteca FluentValidation para .NET, onde cada DTO (Data Transfer Object) recebido pela API deve ter um validador correspondente que verifica tipos de dados, comprimentos de strings, formatos de campos específicos como emails e CPFs, ranges numéricos aceitáveis e padrões de texto permitidos, rejeitando qualquer requisição que não atenda aos critérios estabelecidos antes mesmo de alcançar a camada de lógica de negócio. A proteção contra SQL injection deve ser garantida através do uso exclusivo do Entity Framework Core como ORM, onde todas as queries ao banco de dados utilizam prepared statements e parametrização automática, eliminando a possibilidade de concatenação direta de strings de usuários em comandos SQL. A prevenção de ataques XSS (Cross-Site Scripting) deve ser implementada através de sanitização de inputs que possam ser renderizados em interfaces web, utilizando bibliotecas especializadas para escape de caracteres especiais HTML, JavaScript e CSS, garantindo que conteúdo fornecido por usuários não possa executar scripts maliciosos quando exibido para outros usuários do sistema. A validação deve incluir verificação de tipos MIME para uploads de arquivos, limitação de tamanhos de payload, validação de formatos de geometrias GeoJSON através de bibliotecas especializadas, e rejeição de caracteres de controle e sequências de bytes suspeitas. Mensagens de erro de validação devem ser claras e informativas para usuários legítimos, mas sem revelar detalhes de implementação que possam auxiliar atacantes, mantendo o equilíbrio entre usabilidade e segurança. Este requisito é classificado como Must-have pois constitui a primeira linha de defesa contra a maioria dos ataques web conhecidos, sendo fundamental para a segurança de todos os módulos do sistema.
**Última atualização:** 2026-01-15
**Status do arquivo**: Review
