---
modules: [GEOAPI]
epic: performance
---

# RNF-003: Tempo de Resposta - Queries Espaciais

As buscas espaciais que utilizam operações geométricas complexas como consultas por bounding box (bbox) e busca por raio (radius) devem responder em até 2 segundos no percentil 95, reconhecendo que operações espaciais demandam processamento computacional mais intensivo devido aos cálculos geométricos envolvidos. Este requisito aplica-se ao módulo GEOAPI, onde os principais endpoints de consulta espacial incluem GET /api/units/search-area para busca de unidades dentro de uma área delimitada por coordenadas e GET /api/units/search-radius para busca de unidades dentro de um raio especificado a partir de um ponto central, sendo que ambos os endpoints devem manter o tempo de resposta no percentil 95 abaixo ou igual a 2000 milissegundos. A métrica de aceitação estabelece que o percentil 95 do tempo de resposta deve ser menor ou igual a 2 segundos, e adicionalmente, é obrigatório o uso de índices espaciais através da extensão PostGIS GIST (Generalized Search Tree), que otimiza significativamente operações geométricas ao permitir buscas espaciais eficientes sem necessidade de varredura completa da tabela. Este requisito é classificado como Must-have devido à importância das funcionalidades de busca espacial no contexto de um sistema de informações geográficas, onde usuários frequentemente precisam localizar unidades habitacionais em determinadas áreas ou proximidades, e tempos de resposta superiores a 2 segundos comprometariam a usabilidade dessas funcionalidades essenciais. A implementação deve garantir a criação e manutenção adequada de índices espaciais GIST nas colunas de geometria, otimização das queries espaciais utilizando as funções nativas do PostGIS como ST_Intersects, ST_DWithin e ST_Contains, e potencialmente implementar estratégias de simplificação de geometrias ou clustering para cenários com grandes volumes de dados espaciais que possam impactar a performance das consultas.
**Última atualização:** 2026-01-15
**Status do arquivo**: Review
