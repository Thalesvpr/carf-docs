---
modules: [GEOAPI, GEOWEB, REURBCAD]
epic: compatibility
---

# US-147: Gerenciar Medicoes

Como Topografo quero registrar medicoes de campo para que possa documentar distancias azimutes angulos horizontais e verticais coletados durante levantamento topografico utilizando estacao total GPS RTK trena laser ou outros equipamentos de medicao, onde o endpoint implementado em GEOAPI expoe a rota /api/surveying/measurements permitindo operacoes GET para listagem paginada POST para criacao PUT para atualizacao e DELETE para exclusao de medicoes, garantindo validacao de permissoes baseada em roles onde usuarios com role Surveyor ou superior podem gerenciar medicoes de campanhas as quais pertencem como membros de equipe, incluindo validacao de dados de entrada onde medicao deve pertencer a campanha existente em status ACTIVE referenciar pontos de origem e destino validos e conter pelo menos um tipo de observacao distancia azimute ou angulo, permitindo filtragem da listagem por campaignId para medicoes de uma campanha especifica, measurementType para filtrar por DISTANCE AZIMUTH HORIZONTAL_ANGLE VERTICAL_ANGLE, dateRange para filtrar por periodo de coleta e observerId para medicoes coletadas por topografo especifico, onde a resposta da listagem inclui paginacao com page size totalCount e array de objetos Measurement contendo id campaignId fromPointId toPointId measurementType observedValue standardDeviation instrumentUsed observedAt observerId temperature pressure humidity notes createdAt updatedAt, garantindo rastreabilidade ao requisito funcional RF-162 que especifica registro de observacoes topograficas, incluindo relacionamento com entidades Campaign SurveyPoint fromPoint toPoint e User observer para contextualizacao completa da medicao, permitindo que o frontend GEOWEB e aplicativo mobile GEOGIS exibam formulario de registro de medicao com campos configurados conforme tipo de equipamento utilizado incluindo integracao direta com estacao total via Bluetooth para importacao automatica de observacoes, onde criacao de medicao requer payload JSON com propriedades campaignId fromPointId toPointId measurementType observedValue unidade de medida metros graus, standardDeviation desvio padrao estimado da observacao, instrumentId identificador do equipamento utilizado, metadata objeto com propriedades especificas do tipo de medicao como numberOfSatellites PDOP HDOP para GNSS ou prismaConstant reflectorHeight para estacao total, onde validacao de consistencia fisica verifica que distancias estao dentro de range esperado tipicamente entre 0.01m e 5000m azimutes entre 0 e 360 graus e angulos entre -90 e 90 graus rejeitando valores implaus√≠veis, garantindo registro automatico de condicoes ambientais no momento da medicao incluindo temperatura pressao atmosferica e umidade relativa obtidas de sensores integrados ou estacao meteorologica proxima via API para aplicacao de correcoes atmosfericas, incluindo deteccao automatica de medicoes reciprocas onde sistema identifica pares de medicoes entre mesmos pontos em direcoes opostas calculando discrepancia e alertando se exceder tolerancia configurada, permitindo soft delete de medicoes onde registro e marcado como inativo preservando historico mas excluindo da base de calculo de ajustamento topografico, onde a implementacao em GEOAPI utiliza Repository pattern para abstrair acesso a dados e Specification pattern para construir queries dinamicas de filtragem, garantindo que criacao de medicao dispara validacoes de qualidade em tempo real incluindo verificacao de fechamento angular de estacoes verificacao de compatibilidade entre distancia medida e distancia calculada por coordenadas aproximadas e deteccao de outliers estatisticos, incluindo suporte a importacao em lote de medicoes atraves de upload de arquivos em formatos padrao como GSI Leica RAW Topcon e RINEX para dados GNSS com parsing automatico e validacao de consistencia, permitindo export de medicoes em formatos CSV Excel e TXT para processamento em softwares topograficos externos como Topograph DataGeosis ou GNSS Solutions, onde testes unitarios validam regras de negocio incluindo validacao de ranges valores calculo de discrepancias em medicoes reciprocas e deteccao de outliers com datasets mock, garantindo testes de integracao que verificam criacao listagem atualizacao e exclusao de medicoes em banco de dados PostgreSQL com validacao de isolamento por campanha e tenant.

---

**Ultima atualizacao:** 2025-12-30
