---
modules: [GEOAPI, GEOWEB]
epic: compatibility
---

# US-142: Realizar Ajustamento Topografico

Como Topografo quero processar ajustamento de poligonais para que possa corrigir erros de fechamento distribuir discrepancias angulares e lineares e obter coordenadas ajustadas com precisao adequada para cadastro territorial, onde o endpoint implementado em GEOAPI expoe a rota /api/surveying/adjustments com metodo POST para executar calculo de ajustamento de rede topografica, garantindo validacao de permissoes baseada em roles onde usuarios com role Surveyor ou superior podem processar ajustamentos topograficos, incluindo tratamento de erros 400 Bad Request quando dados de entrada sao invalidos e 422 Unprocessable Entity quando rede topografica nao e ajustavel por insuficiencia de observacoes ou super-determinacao, permitindo payload JSON com propriedades campaignId identificador da campanha de levantamento, points array de pontos topograficos com coordenadas aproximadas, measurements array de medicoes incluindo distancias azimutes e angulos, method metodo de ajustamento LEAST_SQUARES COMPASS_RULE TRANSIT_RULE e constraints array de pontos fixos com coordenadas conhecidas, onde processamento executa calculo matricial de ajustamento pelo metodo dos minimos quadrados MMQ ou regras de ajustamento de poligonais conforme method selecionado, garantindo rastreabilidade ao requisito funcional RF-166 que especifica processamento de levantamentos topograficos, incluindo validacao de consistencia geometrica onde sistema verifica fechamento angular e linear da poligonal calcula erro de fechamento relativo e compara com tolerancias configuradas, permitindo que resposta inclua objeto AdjustmentResult com propriedades adjustedPoints coordenadas ajustadas de cada ponto, residuals residuos de cada observacao, closureError erro de fechamento linear e angular, standardDeviation desvio padrao a posteriori, varianceFactorTest resultado do teste qui-quadrado para validacao estatistica e adjustmentReport relatorio formatado em texto, onde coordenadas ajustadas sao automaticamente aplicadas aos pontos topograficos da campanha atualizando geometrias de unidades habitacionais vinculadas aos pontos, garantindo que ajustamento preserva topologia das geometrias nao gerando sobreposicoes ou gaps entre unidades adjacentes atraves de validacao pos-ajustamento, incluindo suporte a diferentes sistemas geodesicos de referencia incluindo SIRGAS2000 SAD69 WGS84 e sistemas locais com transformacao de coordenadas utilizando biblioteca ProjNet, permitindo que o frontend GEOWEB exiba relatorio visual de ajustamento com diagrama de rede topografica vetores de residuos elipses de erro e tabela comparativa entre coordenadas brutas e ajustadas, onde a implementacao em GEOAPI utiliza biblioteca de algebra linear Math.NET Numerics para resolucao de sistemas de equacoes normais pelo metodo de Cholesky ou QR decomposition, garantindo processamento assincrono para redes topograficas grandes com mais de 1000 pontos retornando 202 Accepted com Location header para polling do resultado, incluindo cache de resultados de ajustamento com invalidacao quando medicoes da campanha forem alteradas permitindo re-execucao sem recalculo quando parametros nao mudarem, onde testes unitarios validam algoritmos de ajustamento comparando resultados com casos conhecidos da literatura topografica incluindo poligonal fechada de 4 vertices e rede triangulada de 6 pontos, garantindo testes de integracao que verificam fluxo completo de criacao de campanha insercao de medicoes processamento de ajustamento e atualizacao de geometrias de unidades em banco de dados PostGIS, incluindo validacao de precision dos calculos numericos garantindo que erros de arredondamento nao se acumulem em redes grandes usando aritmetica de precisao dupla e algoritmos numericamente estaveis.

---

**Ultima atualizacao:** 2025-12-30
**Última atualização:** 2026-01-15
**Status do arquivo**: Pronto
