---
modules: [GEOAPI, GEOWEB, REURBCAD, GEOGIS]
epic: compatibility
---

# US-149: Gerenciar Pontos Topograficos

Como Topografo quero criar e listar pontos de medicao para que possa registrar coordenadas coletadas estabelecer rede de apoio topografico e vincular pontos a vertices de unidades habitacionais, onde o endpoint implementado em GEOAPI expoe a rota /api/surveying/points permitindo operacoes GET para listagem paginada POST para criacao PUT para atualizacao e DELETE para exclusao de pontos topograficos, garantindo validacao de permissoes baseada em roles onde usuarios com role Surveyor ou superior podem gerenciar pontos de campanhas as quais pertencem como membros de equipe, incluindo validacao de dados de entrada onde ponto deve pertencer a campanha existente codigo do ponto deve ser unico dentro da campanha coordenadas devem estar dentro do perimetro geografico geofence da campanha e tipo de ponto deve ser valido CONTROL BOUNDARY DETAIL REFERENCE, permitindo filtragem da listagem por campaignId para pontos de uma campanha especifica, pointType para filtrar por tipo, communityId para pontos dentro de uma comunidade, dateRange para filtrar por periodo de coleta e collectorId para pontos coletados por topografo especifico, onde a resposta da listagem inclui paginacao com page size totalCount e array de objetos SurveyPoint contendo id code campaignId pointType latitude longitude elevation coordinateSystem horizontalAccuracy verticalAccuracy collectionMethod GNSS TOTAL_STATION TAPE_MEASURE collectedAt collectorId description notes createdAt updatedAt, garantindo rastreabilidade ao requisito funcional RF-162 que especifica registro de pontos topograficos, incluindo relacionamento com entidades Campaign User collector e opcionalmente Unit quando ponto representa vertice de unidade habitacional, permitindo que o frontend GEOWEB e aplicativo mobile GEOGIS exibam mapa interativo com pontos renderizados como markers coloridos conforme tipo formulario de cadastro com campos latitude longitude elevation e integracao com GPS do dispositivo para captura automatica de coordenadas, onde criacao de ponto requer payload JSON com propriedades code campaignId pointType latitude longitude elevation coordinateSystem EPSG code como 4326 ou 31983, collectionMethod horizontalAccuracy desvio padrao horizontal em metros, verticalAccuracy desvio padrao vertical em metros, metadata objeto com propriedades especificas do metodo de coleta como pdop hdop vdop numberOfSatellites para GNSS ou instrumentId setupHeight reflectorHeight para estacao total, onde validacao de consistencia verifica que coordenadas estao dentro de bounds validos latitude entre -90 e 90 longitude entre -180 e 180 elevation dentro de faixa esperada para regiao tipicamente entre -500m e 9000m rejeitando valores implausíveis, garantindo transformacao automatica de coordenadas quando necessario convertendo entre sistemas de referencia utilizando biblioteca ProjNet permitindo entrada em UTM e armazenamento em WGS84 ou vice-versa, incluindo deteccao automatica de duplicatas onde sistema alerta quando ponto sendo criado possui coordenadas muito proximas distancia menor que threshold configuravel de ponto existente sugerindo reutilizacao ou edicao, permitindo vinculacao automatica de pontos topograficos a vertices de geometrias de unidades habitacionais atraves de algoritmo de snapping que identifica vertices proximos dentro de tolerancia e cria relacionamento, onde a implementacao em GEOAPI armazena coordenadas em coluna geometry tipo Point do PostGIS permitindo queries espaciais eficientes como busca por proximidade pontos dentro de poligono e calculo de distancias geodesicas, garantindo que pontos de controle geodesicos tipo CONTROL sao marcados como fixos no processamento de ajustamento topografico servindo como referencia para correcao de pontos de detalhe, incluindo suporte a importacao em lote de pontos atraves de upload de arquivos CSV TXT ou formatos especificos de equipamentos GNSS como RINEX com parsing validacao e preview antes de confirmacao, permitindo export de pontos em formatos CSV GeoJSON KML Shapefile e TXT formatado para importacao em softwares topograficos externos, onde testes unitarios validam regras de negocio incluindo validacao de coordenadas unicidade de codigo transformacao entre sistemas de referencia e deteccao de duplicatas com datasets mock, garantindo testes de integracao que verificam criacao listagem atualizacao exclusao e queries espaciais de pontos em banco de dados PostgreSQL com PostGIS validando corretude de operacoes geometricas e isolamento multi-tenant.

---

**Ultima atualizacao:** 2025-12-30
**Última atualização:** 2026-01-15
**Status do arquivo**: Review
