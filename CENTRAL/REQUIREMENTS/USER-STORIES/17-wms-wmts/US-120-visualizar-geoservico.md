---
modules: [GEOAPI, GEOWEB]
epic: security
---

# US-120: Visualizar Geoserviço

Como administrador responsável por manutenção de integrações geoespaciais, quero visualizar configurações detalhadas de serviço WMS/WMTS específico para que gerenciar integração seja possível, validando conectividade do serviço, inspecionando metadados extraídos automaticamente, verificando camadas disponíveis para adição ao mapa, e diagnosticando problemas quando layers não são exibidos corretamente. A funcionalidade deve apresentar interface de detalhamento completo do geoserviço incluindo seção de identificação com nome, tipo (WMS ou WMTS), URL base do endpoint, e status atual de conectividade com timestamp da última verificação bem-sucedida. Metadados técnicos devem apresentar versão do protocolo detectada automaticamente (exemplo: WMS 1.3.0), sistemas de referência de coordenadas suportados listando códigos EPSG disponíveis (EPSG:4326, EPSG:3857, EPSG:31983), extensão geográfica global do serviço apresentada como bounding box em coordenadas, e formatos de imagem suportados para requisições GetMap/GetTile (image/png, image/jpeg, image/webp). Lista detalhada de camadas disponíveis deve apresentar todas as layers descobertas via parsing do documento Capabilities incluindo identificador técnico da camada (name), título descritivo para exibição, abstract explicando conteúdo e finalidade da camada, extensão geográfica específica da layer quando diferente do serviço, sistemas de coordenadas suportados pela layer individual, e estilos disponíveis quando serviço oferece múltiplas simbologias. Informações de autenticação devem indicar se serviço requer credenciais exibindo username cadastrado (sem expor senha) e permitindo teste de conectividade validando se credenciais ainda são válidas. Histórico de saúde do serviço deve apresentar log de verificações de conectividade recentes mostrando timestamps de checks bem-sucedidos, falhas ocorridas com mensagem de erro capturada (timeout, DNS resolution failed, HTTP 401 unauthorized), e uptime calculado como percentual de disponibilidade nos últimos 30 dias. Interface deve disponibilizar ações incluindo botão de teste de conexão executando requisição GetCapabilities em tempo real validando configurações atuais, botão de refresh para atualizar metadados e lista de camadas quando serviço externo é modificado, e botão de edição para ajustar URL ou credenciais quando necessário. Os critérios de aceitação incluem endpoint implementado retornando GET /api/geoservices/{id} com objeto JSON completo contendo todas as seções de identificação, metadados técnicos, lista de camadas com detalhes, informações de autenticação e histórico de saúde, validação rigorosa de permissões garantindo que apenas administradores possam visualizar configurações incluindo credenciais, tratamento adequado de erros incluindo geoservice_id não encontrado ou acesso negado, documentação OpenAPI descrevendo schema completo de response incluindo estrutura de camadas e metadados, e testes unitários e de integração validando recuperação completa de dados, parsing de Capabilities, e operações de teste de conexão. Esta User Story está relacionada ao RF-214 e é implementada através do endpoint GET /api/geoservices/{id} no backend GEOAPI com cache de metadados e validação sob demanda, e interface de detalhamento no frontend GEOWEB com visualização estruturada e ações administrativas, pertencendo ao Epic 12: Integrações. O status atual é proposed, com endpoint existente mas documentação formal criada posteriormente.

---

**Última atualização:** 2025-12-30
**Status do arquivo**: Pronto
