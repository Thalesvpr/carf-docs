---
modules: [GEOAPI, GEOWEB, REURBCAD]
epic: security
---

# US-156: Visualizar Detalhes de Camada

Como Analista quero ver configuracoes de uma camada para que possa gerenciar propriedades e estilo da layer revisar schema de atributos consultar estatisticas de features e configurar regras de visualizacao customizadas, onde o endpoint implementado em GEOAPI expoe a rota /api/layers/{id} retornando objeto Layer detalhado com todas as propriedades schema estilo metadados e estatisticas calculadas, garantindo validacao de permissoes baseada em roles onde usuarios autenticados podem visualizar camadas PUBLIC do tenant e camadas PRIVATE ou RESTRICTED as quais possuem acesso, incluindo tratamento de erro 404 Not Found quando ID da camada nao existe e 403 Forbidden quando usuario nao possui permissao para acessar camada RESTRICTED, permitindo que a resposta inclua objeto completo com propriedades id name description geometryType schema style visibility category communityId communityName createdBy createdByName permissions featuresCount bounds envelope geografico da camada extent area total ocupada statistics metadata createdAt updatedAt, onde campo schema contem JSON Schema completo definindo estrutura de propriedades das features incluindo tipo descricao constraints valores permitidos e valores padrao, garantindo rastreabilidade ao requisito funcional RF-130 que especifica visualizacao e configuracao de camadas vetoriais, incluindo relacionamento eager loading com entidades Community User createdBy e permissions lista de usuarios com acesso quando visibility e RESTRICTED, permitindo que o frontend GEOWEB renderize painel de detalhes com preview do mapa mostrando features da camada tabela de propriedades do schema editor de estilo visual grafico de distribuicao de features por propriedade e timeline de alteracoes, onde campo style contem objeto com configuracoes de renderizacao fillColor strokeColor strokeWidth opacity iconUrl markerSize labelField labelSize e conditionalStyles array de regras condicionais, garantindo que campo statistics inclui metricas agregadas calculadas sob demanda como total de features por tipo distribuicao de valores de propriedades categoricas media min max de propriedades numericas area total perimetro total e densidade espacial, incluindo campo bounds contendo envelope geografico da camada em formato GeoJSON Polygon delimitando extent minimo que contem todas as features util para zoom automatico no mapa, permitindo visualizacao de features de exemplo mostrando primeiras 10 features da camada com geometria e propriedades para validacao rapida de conteudo sem necessidade de carregar camada completa, onde campo metadata contem informacoes adicionais como fonte dos dados data de coleta responsavel tecnico precisao esperada sistema de referencia espacial e licenca de uso, garantindo que campo permissions quando visibility e RESTRICTED lista usuarios e roles com acesso permitindo gerenciamento granular de quem pode visualizar editar ou excluir features da camada, incluindo historico de alteracoes de schema mostrando versoes anteriores do schema quando propriedades foram adicionadas removidas ou alteradas permitindo entendimento da evolucao da estrutura de dados, permitindo preview de estilo onde usuario visualiza como features serao renderizadas conforme configuracoes atuais de style incluindo exemplos de diferentes valores de propriedades e escalas de zoom, onde a implementacao em GEOAPI utiliza DTO LayerDetailDto com campos computados calculados em tempo de execucao incluindo featuresCount statistics bounds extent usando queries otimizadas ao PostGIS, garantindo cache de estatisticas e bounds com invalidacao quando features da camada forem adicionadas atualizadas ou excluidas, incluindo editor visual de estilo no frontend permitindo que usuario ajuste cores tamanhos e opacidade com preview em tempo real aplicando alteracoes via PUT ao endpoint de atualizacao de camada, permitindo export de configuracao da camada em formato JSON incluindo schema style metadata permissions facilitando backup migracao entre ambientes e versionamento em Git, onde botoes de acao contextuais incluem editar configuracoes adicionar feature visualizar no mapa exportar dados duplicar camada gerenciar permissoes e excluir conforme permissoes do usuario, garantindo validacao de integridade referencial onde sistema exibe alertas se camada for referenciada por mapas publicados relatorios automatizados ou analises espaciais impedindo alteracoes breaking changes sem confirmacao, incluindo possibilidade de gerar relatorio PDF da camada incluindo mapa de overview estatisticas descricao do schema lista de features e metadados com assinatura digital do responsavel tecnico, onde testes unitarios validam calculo de estatisticas agregadas calculo de bounds extent e logica de permissoes com datasets mock, garantindo testes de integracao que verificam recuperacao completa de camada com relacionamentos eager loading calculo de campos computados queries espaciais para bounds e validacao de controle de acesso baseado em visibility e permissions.

---

**Ultima atualizacao:** 2025-12-30
**Última atualização:** 2026-01-15
**Status do arquivo**: Review
