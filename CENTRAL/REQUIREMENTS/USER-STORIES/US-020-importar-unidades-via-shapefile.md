---
modules: [GEOAPI, GEOWEB, GEOGIS]
epic: compatibility
---

# US-020: Importar Unidades via Shapefile

Como gestor, quero importar unidades de um shapefile para que cadastro em massa seja rápido, onde o sistema aceita arquivos shapefile permitindo carga em lote de múltiplas unidades com suas geometrias e atributos previamente preparados em ferramentas GIS externas, garantindo eficiência em projetos com grandes volumes de dados espaciais. O cenário principal de uso inicia quando um gestor acessa a funcionalidade de importação e faz upload dos arquivos componentes do shapefile (.shp, .dbf, .shx, .prj) que são validados quanto a formato e estrutura, permitindo então mapear campos do shapefile para campos do modelo de unidade do sistema onde o gestor define qual coluna do DBF corresponde a code, qual a type, e outras propriedades, seguido de validação de geometrias e preview dos registros que serão importados antes de confirmar a operação. Os critérios de aceitação incluem capacidade de upload simultâneo dos arquivos obrigatórios .shp (geometrias), .dbf (atributos), .shx (índice) e .prj (projeção) validando presença de todos os componentes necessários, interface de mapeamento de campos onde usuário associa colunas do shapefile aos campos do sistema como code e type com validação de tipos de dados, validação de geometrias incluindo verificação de SRID (reprojetando automaticamente se necessário), detecção de geometrias inválidas e sobreposições, tela de preview apresentando tabela com registros que serão importados destacando potenciais problemas ou conflitos antes da confirmação, e log detalhado de erros ao final da importação listando geometrias inválidas, códigos duplicados ou outros problemas encontrados permitindo correção e reimportação. Esta funcionalidade é implementada pelos módulos GEOAPI (endpoint POST /api/imports/shapefile usando biblioteca GDAL/OGR para leitura de shapefile e processamento assíncrono para grandes volumes) e GEOWEB (wizard de importação com upload de arquivos, mapeamento de campos e preview de dados), garantindo rastreabilidade com RF-067 (Importação de Shapefiles) e UC-008 (Caso de Uso de Importação em Lote), onde importações são processadas transacionalmente garantindo que ou todas as unidades válidas são importadas ou nenhuma em caso de erro crítico, incluindo relatório final com estatísticas de sucesso e falha.

---

**Última atualização:** 2025-12-30