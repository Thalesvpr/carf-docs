---
modules: [GEOAPI, GEOWEB]
epic: compatibility
---

# US-125: Gerenciar Quadras

Como Analista quero listar e criar quadras para que possa organizar unidades habitacionais por quadras conforme divisao territorial do assentamento, onde o endpoint implementado em GEOAPI expoe a rota /api/blocks permitindo operacoes GET para listagem paginada e POST para criacao de novas quadras, garantindo validacao de permissoes baseada em roles onde usuarios com role Analyst ou superior podem listar quadras mas apenas Managers podem criar novas, incluindo validacao de dados de entrada onde codigo da quadra deve ser unico dentro da comunidade e geometria deve ser um poligono valido em formato GeoJSON, permitindo filtragem da listagem por communityId para exibir apenas quadras de uma comunidade especifica, onde a resposta da listagem inclui paginacao com parametros page size totalCount e array de objetos Block contendo id code name geometry area createdAt e updatedAt, garantindo rastreabilidade ao requisito funcional RF-073 que especifica gerenciamento de divisao territorial, incluindo relacionamento com entidade Community onde cada quadra pertence a uma comunidade e relacionamento com entidade Plot onde cada quadra pode conter multiplos lotes, permitindo que o frontend GEOWEB exiba mapa interativo com poligonos das quadras renderizados em camada vetorial com estilo configuravel, onde a criacao de quadra requer payload JSON com propriedades code name communityId e geometry em formato GeoJSON Polygon ou MultiPolygon, garantindo validacao de sobreposicao onde sistema impede criacao de quadras com geometrias que se sobrepoem a quadras existentes da mesma comunidade, incluindo calculo automatico de area do poligono em metros quadrados armazenado na propriedade area do modelo Block, onde a implementacao em GEOAPI utiliza biblioteca NetTopologySuite para operacoes geometricas incluindo validacao de poligonos calculo de area e deteccao de sobreposicao, permitindo soft delete de quadras onde registro e marcado como inativo sem remocao fisica do banco de dados garantindo rastreabilidade historica, garantindo testes unitarios que validam regras de negocio incluindo unicidade de codigo validacao de geometria e calculo de area, incluindo testes de integracao que verificam criacao listagem atualizacao e exclusao de quadras em banco de dados real PostgreSQL com extensao PostGIS para tipos geometricos.

---

**Ultima atualizacao:** 2025-12-30
