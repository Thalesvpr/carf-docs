---
modules: [GEOAPI, GEOWEB, GEOGIS]
epic: performance
---

# US-131: Listar Unidades de Comunidade

Como Analista quero listar todas as unidades de uma comunidade para que possa visualizar cadastro territorial completo do assentamento com suporte a filtragem paginacao e ordenacao, onde o endpoint implementado em GEOAPI expoe a rota /api/communities/{id}/units retornando lista paginada de unidades habitacionais pertencentes a comunidade especificada, garantindo validacao de permissoes baseada em roles onde usuarios com role Analyst ou superior podem listar unidades de comunidades do seu tenant, incluindo tratamento de erro 404 Not Found quando ID da comunidade nao existe e validacao de isolamento multi-tenant impedindo acesso a unidades de outros tenants, permitindo filtragem atraves de query parameters incluindo status para filtrar por DRAFT PENDING APPROVED, blockId para filtrar unidades de uma quadra especifica, plotId para filtrar unidades de um lote especifico, holderId para filtrar unidades de um titular especifico, search para busca textual em codigo endereco ou nome do titular e dateRange para filtrar por periodo de criacao, onde a resposta inclui paginacao com page size totalCount hasNextPage hasPreviousPage nextCursor previousCursor e array items contendo objetos Unit com propriedades id code address area status blockCode plotCode holderName createdAt updatedAt, garantindo rastreabilidade ao requisito funcional RF-040 que especifica listagem de unidades por comunidade, incluindo relacionamento com entidades Block Plot e Holder para exibir informacoes contextuais sem necessidade de requisicoes adicionais, permitindo que o frontend GEOWEB exiba tabela paginada com colunas configuradas codigo endereco area status quadra lote titular e acoes incluindo botoes para editar visualizar no mapa exportar ficha e excluir, onde a implementacao em GEOAPI utiliza specification pattern para construir queries dinamicas baseadas em filtros aplicados garantindo SQL otimizado com joins necessarios e indices apropriados, garantindo que geometrias das unidades nao sejam incluidas na listagem para reduzir payload sendo carregadas apenas em endpoints especificos de geometria, incluindo suporte a ordenacao por multiplos campos simultaneos atraves de parametro sortBy aceitando valores como code asc, area desc, createdAt desc, permitindo export da listagem em formatos CSV Excel GeoJSON e Shapefile para uso em sistemas GIS externos e geracao de relatorios gerenciais, onde testes unitarios validam logica de filtragem paginacao ordenacao e construcao de especificacoes com datasets mock, garantindo testes de integracao que verificam recuperacao correta de unidades de comunidade especifica com relacionamentos eager loading e validacao de performance de queries complexas com multiplos filtros, incluindo suporte a aggregations no response header incluindo total por status totalArea areaMedia e distribuicao percentual por tipo de ocupacao facilitando exibicao de dashboards estatisticos sem requisicoes adicionais.

---

**Ultima atualizacao:** 2025-12-30
**Última atualização:** 2026-01-15
**Status do arquivo**: Pronto
