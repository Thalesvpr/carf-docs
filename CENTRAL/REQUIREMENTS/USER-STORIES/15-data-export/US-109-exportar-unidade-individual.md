---
modules: [GEOAPI, GEOWEB]
epic: security
---

# US-109: Exportar Unidade Individual

Como analista necessitando documentar informações de unidade habitacional específica, quero exportar dados completos de uma unidade em formato estruturado para que gerar relatório individual detalhado para titular seja possível, atendendo solicitações de comprovação de cadastro, documentação para processos judiciais, ou entrega de informações durante atendimento presencial ao beneficiário. A funcionalidade deve compilar exportação completa da unidade incluindo identificação com código único, endereço normalizado, coordenadas geográficas em formatos múltiplos (graus decimais, UTM), e referências cadastrais municipais quando disponíveis. Dados do titular devem incluir nome completo, CPF (com últimos dígitos mascarados para proteção), contatos (telefone, email) conforme consentimento, e informações de composição familiar respeitando LGPD. Informações territoriais devem apresentar área construída e terreno em metros quadrados, perímetro calculado, geometria da unidade em formato GeoJSON ou WKT, e mapa de localização georreferenciado indicando posição na comunidade. O sistema deve incluir histórico de processamento apresentando timeline de eventos principais (data de cadastro inicial, edições realizadas, transições de status, aprovações), documentos anexados com lista de arquivos (fotos, documentos pessoais, plantas) incluindo thumbnails quando aplicável, e observações técnicas registradas por analistas durante validação. A exportação deve ser gerada em formato estruturado JSON para integração com sistemas externos ou em formato visual PDF para impressão e entrega física ao titular, incluindo QR code com link para verificação online de autenticidade do documento exportado. Os critérios de aceitação incluem endpoint implementado aceitando unit_id e format (JSON ou PDF) retornando arquivo completo com todas as seções descritas, validação de permissões garantindo que apenas usuários autorizados possam exportar dados sensíveis aplicando mascaramento conforme role, tratamento adequado de erros incluindo unidade não encontrada ou acesso negado, documentação OpenAPI descrevendo schema JSON completo e exemplo de PDF gerado, e testes unitários e de integração validando completude dos dados exportados, mascaramento de informações sensíveis e geração de QR code. Esta User Story está relacionada ao RF-199 e é implementada através do endpoint GET /api/units/{id}/export no backend GEOAPI com template engine para PDF, e botão de exportação no frontend GEOWEB na tela de detalhes da unidade, pertencendo ao Epic 10: Relatórios e Exportação. O status atual é proposed, com endpoint existente mas documentação formal criada posteriormente.

---

**Última atualização:** 2025-12-30
**Status do arquivo**: Pronto
