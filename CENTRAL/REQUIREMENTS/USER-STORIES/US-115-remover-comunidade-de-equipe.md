---
modules: [GEOAPI, GEOWEB, REURBCAD]
epic: maintainability
---

# US-115: Remover Comunidade de Equipe

Como gerente responsável por reorganização de áreas de atuação, quero desassociar comunidade específica de equipe para que realocar áreas de trabalho seja possível, permitindo redistribuição de carga entre equipes quando houver desbalanceamento, remoção de acesso quando equipe conclui trabalho em comunidade, ou reorganização territorial por mudanças em estratégia de campo. A funcionalidade deve implementar operação DELETE direcionada removendo vínculo entre equipe e comunidade específica, automaticamente revogando permissões de acesso de todos os membros da equipe à comunidade desvinculada, garantindo que dados da comunidade não sejam mais acessíveis por usuários que não possuam vínculo alternativo através de outra equipe ou permissão individual. O sistema deve validar pré-condições antes de executar desvinculação verificando existência do vínculo a ser removido (evitando operação sem efeito), checando se remoção não deixará comunidade órfã sem nenhuma equipe responsável quando política de governança exigir cobertura obrigatória, e confirmando permissões administrativas do usuário executor. A operação deve ser executada transacionalmente incluindo remoção do registro de vínculo na tabela de relacionamento, revogação automática de permissões derivadas desse vínculo para todos os membros da equipe (preservando permissões concedidas por outros meios), invalidação de caches de permissões para forçar recálculo em próximas requisições, e registro completo em audit log. O sistema deve apresentar confirmação explícita antes de executar remoção informando quantidade de usuários que perderão acesso à comunidade e solicitando justificativa opcional para documentação, especialmente quando operação afeta equipe com trabalho ativo recente na comunidade. Notificações devem ser enviadas aos membros da equipe afetados informando sobre revogação de acesso à comunidade e orientando sobre procedimentos caso acesso ainda seja necessário. Os critérios de aceitação incluem endpoint implementado aceitando DELETE /api/teams/{id}/communities/{communityId} com validação de existência do vínculo, validação rigorosa de permissões garantindo que apenas gerentes e administradores possam desvincular comunidades, tratamento adequado de erros incluindo vínculo não encontrado, violação de política de cobertura ou operação não autorizada, documentação OpenAPI descrevendo semântica da operação e efeitos de propagação de permissões, e testes unitários e de integração validando remoção de vínculo, revogação automática de permissões para membros da equipe, validações de regras de negócio e registro em audit log. Esta User Story está relacionada ao RF-033 e é implementada através do endpoint DELETE /api/teams/{id}/communities/{communityId} no backend GEOAPI com propagação transacional de revogações, e interface de gestão no frontend GEOWEB com confirmação e notificação aos afetados, pertencendo ao Epic 2: Cadastro de Unidades. O status atual é proposed, com endpoint existente mas documentação formal criada posteriormente.

---

**Última atualização:** 2025-12-30
