---
modules: [GEOAPI, GEOWEB]
epic: security
---

# US-112: Gerenciar Roles de Usuário

Como administrador responsável por controle de acessos e segurança do sistema, quero atribuir e remover roles de usuário para que controlar níveis de acesso granulares no sistema seja possível, implementando princípio de privilégio mínimo onde cada membro da equipe possui exatamente as permissões necessárias para executar suas funções, sem excessos que representem risco de segurança. A funcionalidade deve permitir operações de atribuição de roles onde administrador possa adicionar um ou múltiplos roles a usuário específico escolhendo entre roles disponíveis no sistema incluindo VIEWER (visualização apenas), EDITOR (edição de unidades e documentos), VALIDATOR (aprovação e rejeição de processos), MANAGER (gestão de equipes e comunidades), ADMIN (administração de tenant), e SUPER_ADMIN (administração global da plataforma). O sistema deve implementar operação de remoção de roles permitindo que administrador revogue permissões específicas de usuário quando houver mudança de função, desligamento de equipe, ou necessidade de restrição temporária de acesso, mantendo histórico completo de concessões e revogações em audit log para rastreabilidade e conformidade. Validação de regras de negócio deve impedir operações inválidas incluindo remoção do único ADMIN de um tenant deixando organização sem administrador, auto-remoção de role crítico que resultaria em perda de acesso do próprio administrador, e atribuição de SUPER_ADMIN por usuário que não possui esse nível de privilégio. A interface deve apresentar visualização clara de roles atuais do usuário, seletor multi-escolha para adição de novos roles, e confirmação explícita para remoção de roles críticos com warning sobre impacto da operação. Os critérios de aceitação incluem endpoint implementado aceitando POST para adicionar roles e DELETE para remover roles específicos via /api/accounts/{id}/roles, validação rigorosa de permissões garantindo que apenas administradores possam gerenciar roles e super admins possam atribuir SUPER_ADMIN, tratamento adequado de erros incluindo role inválido, violação de regras de negócio ou conflito de estado, documentação OpenAPI descrevendo enumeração completa de roles disponíveis e regras de atribuição, e testes unitários e de integração validando todas as operações, regras de negócio e registro em audit log. Esta User Story está relacionada ao RF-022 e é implementada através do endpoint POST/DELETE /api/accounts/{id}/roles no backend GEOAPI com controle transacional de permissões, e interface de gestão no frontend GEOWEB com UX intuitiva para operações de acesso, pertencendo ao Epic 11: Administração. O status atual é proposed, com endpoint existente mas documentação formal criada posteriormente.

---

**Última atualização:** 2025-12-30
**Status do arquivo**: Review
