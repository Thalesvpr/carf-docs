---
modules: [GEOAPI, GEOWEB, GEOGIS]
epic: compatibility
---

# US-019: Desenhar Geometria no Mapa

Como analista trabalhando na web, quero desenhar polígono diretamente no mapa para que geometria seja precisa, onde o sistema fornece ferramentas interativas de desenho sobre mapa base permitindo captura precisa de limites de propriedades através de interface intuitiva de clique e arraste, garantindo qualidade dos dados espaciais sem necessidade de ferramentas GIS externas. O cenário principal de uso inicia quando um analista está criando ou editando uma unidade e ativa a ferramenta de desenho no componente de mapa, permitindo clicar sequencialmente no mapa para adicionar vértices do polígono onde cada clique captura coordenadas latitude/longitude em WGS84, com capacidade de editar vértices arrastando-os para novas posições e finalizar o polígono clicando no primeiro vértice ou usando botão de conclusão. Os critérios de aceitação incluem implementação de ferramenta de desenho usando MapLibre Draw ou biblioteca similar com controles intuitivos para adicionar, mover e remover vértices, funcionalidade opcional de snap to grid que quando ativada alinha vértices automaticamente a uma grade regular facilitando desenhos alinhados e uniformes, cálculo automático e exibição em tempo real da área do polígono à medida que é desenhado mostrando valor atualizado em metros quadrados, e preview da geometria antes de salvar permitindo revisão visual e edição adicional antes de confirmar inclusão no registro da unidade. Esta funcionalidade é implementada pelos módulos GEOAPI (endpoint POST /api/units aceita geometry em formato GeoJSON e valida estrutura e SRID) e GEOWEB (componente de mapa com controles de desenho integrados, feedback visual de área e botões de confirmação/cancelamento), garantindo rastreabilidade com RF-066 (Desenho de Geometrias no Mapa) e UC-001 (Caso de Uso de Gestão de Unidades), onde geometrias desenhadas são automaticamente validadas quanto a auto-interseções e outras anomalias topológicas, incluindo suporte a desfazer/refazer durante processo de desenho e templates de formas comuns para acelerar entrada de geometrias regulares.

---

**Última atualização:** 2025-12-30