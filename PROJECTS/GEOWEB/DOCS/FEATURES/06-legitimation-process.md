# Legitimation Process - Processo de Legitimação

Feature de gestão processo legitimação fundiária implementada como workflow management React SPA permitindo MANAGER e ADMIN iniciarem acompanharem finalizarem processos REURB-S REURB-E regularização comunidades através de páginas LegitimationProcessesListPage listando processos ativos status INITIATED IN_PROGRESS VALIDATION APPROVED COMPLETED filtros search por comunidade tipo REURB-S REURB-E data início, ProcessFormPage wizard criação processo seleção community tipo REURB modalidade justificativa legal documentação required checklist, ProcessDetailsPage tabs Overview Checklist Timeline Documents Actions exibindo informações completas status atual próximos passos histórico operações, componentes principais ProcessCard comunidade nome tipo status progress bar percentage completed tasks actions view advance, ChecklistWidget tabela tasks obrigatórias opcionais checkbox completion status comments attachments upload, TimelineView vertical timeline events chronological order icon timestamp actor action description, DocumentsPanel listando attached documents types categorias download upload delete permissions, AdvanceProcessDialog confirmação transição status verificando checklist completion required documents attachments justification textarea.

Validações implementadas verificando community selection required validando existência via GET /api/communities/:id checking tenant ownership não possui processo ativo impedindo duplicate simultaneous processes mesma community, tipo process obrigatório enum REURB-S REURB-E validando modalidade conforme legislação Lei 13.465/2017 REURB-S gratuito interesse social renda familiar até 5 salários REURB-E onerosamente renda superior, checklist completion antes advance status verificando tasks obrigatórias marked completed impedindo skip stages workflow, documents required verificando tipos obrigatórios presente antes finalization planta topográfica memorial descritivo certidões negativas documentos titulares, justification legal obrigatória textarea min 100 chars fundamentação jurídica ato legitimação compliance legislação urbanística ambiental, approval permissions validando apenas MANAGER pode aprovar REURB-S ADMIN pode aprovar REURB-E distinction authority levels, date constraints verificando início processo anterior finalização reasonable timeline min 30 dias max 2 anos regulation limits, validação client-side onChange server-side business rules enforcement backend.

API integration via custom hooks useLegitimationProcesses TanStack Query useQuery key processes filters community type status, useCreateProcess mutation POST /api/legitimation-processes body community_id type checklist_template validações backend tenant ownership community availability, useUpdateProcess PATCH /api/legitimation-processes/:id partial fields preserving timeline history, useAdvanceStatus PATCH /api/legitimation-processes/:id/advance body new_status justification comments validando checklist completion documents backend state machine transitions INITIATED → IN_PROGRESS → VALIDATION → APPROVED → COMPLETED impedindo invalid transitions, useCompleteTask PATCH /api/legitimation-processes/:id/tasks/:taskId body completed comments attachments updating progress percentage, useUploadDocument POST /api/legitimation-processes/:id/documents multipart file type category backend storing blob returning document_url, useGetTimeline GET /api/legitimation-processes/:id/timeline retornando array events chronological timestamps actors actions, notifications webhooks backend sending email notifications stakeholders community leaders team members quando status transitions documents uploaded tasks completed, auditoria comprehensive logging legitimation_process_history table tracking all state changes actor timestamp justification compliance legal requirements.

Domain model mapeando processo legitimação TypeScript interface LegitimationProcess com id UUID community Community relation type enum REURB-S REURB-E status enum INITIATED IN_PROGRESS VALIDATION APPROVED COMPLETED checklist ChecklistItem array tasks completed boolean comments attachments documents ProcessDocument array type category url timeline ProcessEvent array timestamp actor action description created_by updated_by timestamps, implementação UC-009 requirements incluindo iniciar processo seleção community tipo REURB modalidade checklist template, acompanhar processo visualização status checklist timeline documents, completar tasks checklist marking done comments attachments upload, upload documentos obrigatórios opcionais categorização metadata, avançar status workflow transitions validações checklist documents permissions, aprovar processo final validation MANAGER ADMIN conforme tipo, finalizar emitindo documentação título legitimação posse certidões, notificações stakeholders transitions, auditoria completa rastreabilidade legal compliance, relacionamento requirements rastreando RF-022 RF-023 gestão processo legitimação workflow legal compliance REURB.

---

**Última atualização:** 2026-01-11
**Status do arquivo**: Pronto
