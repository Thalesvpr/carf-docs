# GIS Integration - Integração SIG

Integração GIS implementada React Leaflet fornecendo usuários ADMIN MANAGER ANALYST interface visualização manipulação dados geoespaciais através componente MapView encapsulando MapContainer Leaflet configurado tileLayer OpenStreetMap satellite imagery switcher botões toggle base maps permitindo usuários escolherem visualização preferida contexto análise urbana perímetros REURB localizando unidades habitacionais communities boundaries sobreposição camadas temáticas WMS WMTS externas IBGE MapBiomas cobertura solo uso terra imagens satélite ortofotos alta resolução facilitando validação geometrias conferência campo desktop analista, renderização GeoJSON layers Units Communities Plots Blocks geometrias Polygon MultiPolygon styled conforme propriedades status caracterização CONSOLIDADA verde PRECARIA amarelo RISCO vermelho permitindo identificação visual rápida situações críticas intervenção prioritária campo validação analista aprovação manager decisões legitimação fundadas dados espaciais precisos atualizados sincronizados backend GEOAPI PostgreSQL PostGIS RLS multi-tenancy garantindo isolamento visualização apenas dados tenant usuário autenticado pertence evitando exposição dados municipais vizinhos concorrentes compliance LGPD proteção informações pessoais geográficas sensíveis, controle camadas LayerControl painel sidebar checkboxes toggle visibility individual layers Units Communities External WMS organização hierárquica groups Related Layers Base Layers External Sources facilitando navegação descoberta camadas disponíveis evitando clutter mapa sobreposição excessiva geometrias prejudicando legibilidade análise espacial decisões informadas baseadas visualização clara dados geoespaciais, ferramentas desenho DrawControl toolbar botões polygon rectangle circle marker edit delete selection mode ativando Leaflet Draw plugin handlers capturando geometries desenhadas usuário formato GeoJSON coordinates lon lat EPSG:4326 WGS84 padrão web maps convertendo backend PostGIS Geography SRID 4326 armazenamento spatial queries ST_Intersects ST_Contains ST_Within análises sobreposição contenção proximidade buffer distance queries raio metros encontrando unidades próximas ponto interesse equipamentos públicos áreas risco ambiental restrições urbanísticas fundamentando decisões técnicas legitimação aprovação rejeição solicitação alterações geometria cadastro complementar documentação adicional photos evidências campo conformidade realidade terreno, validações geometria incluem topology checking self-intersections via Turf.js kinks function detectando invalid rings alertando usuário errors antes salvar evitando persistência dados corromptos inconsistentes PostgreSQL constraints violations foreign keys unique indexes garantindo integridade referencial banco dados, area validation min 10 max 1000000 square meters bounds razoáveis residential units evitando cadastros errôneos mouse clicks acidentais digitação incorreta coordenadas importação shapefiles sem validação prévia cleaning geometries simplification excessive vertices reduzindo complexity rendering performance queries spatial indexes GiST PostGIS otimizando searches large datasets milhares dezenas milhares unidades communities municipalities grande porte capitais regiões metropolitanas densamente povoadas cadastros massivos campo mobile offline sync bidirectional conflicts resolution merge strategies, coordinates validation latitude -90 to 90 longitude -180 to 180 decimal degrees format rejeitando out-of-bounds values projected coordinates meters confusing lat lon inverting axes common error importing external data sources shapefiles CSVs GPX tracks field devices GPS GNSS receivers smartphones tablets accuracy varying meters dozens meters depending satellite visibility urban canyon multipath reflections atmospheric conditions ionospheric delays corrected DGPS RTK centimeter-level precision topographic surveys cadastral mapping legal boundaries legitimation processes requiring high accuracy compliance technical standards INCRA normas técnicas georreferenciamento imóveis rurais adaptadas urban context REURB specificities, duplicate detection spatial queries comparing drawn polygon existing units ST_Intersects threshold percentage overlap area alerting potential duplicates offering merge split options user decision preserving audit trail justification comments timestamps user_id changes accountability compliance internal controls external audits TCU CGU fiscal responsibility public administration transparency LGPD data protection personal information geographic locations sensitive addresses coordinates holders names CPF documents photos evidences field collection requiring encryption access controls role-based permissions RLS policies multi-tenancy isolation preventing unauthorized access cross-tenant data leakage security breaches incidents.

## Integração API

API integration endpoints GET /api/layers retornando pre-configured municipal layers WMS WMTS metadata URL capabilities bbox extent CRS projection facilitating discovery addition relevant external sources avoiding users memorizing URLs typing errors invalid configurations failed connections timeout retries exponential backoff circuit breakers resilience patterns handling external services instability downtime maintenance windows scheduled unscheduled outages degrading gracefully fallback cached tiles offline mode read-only visualization without editing saving changes requiring connectivity backend persistence PostgreSQL replication backups disaster recovery RTO RPO objectives compliance SLA service level agreements uptime availability performance response times throughput concurrent users load testing stress testing capacity planning horizontal scaling Kubernetes pods replicas autoscaling HPA metrics CPU memory custom application-level metrics requests per second active sessions database connections pool exhaustion deadlocks slow queries missing indexes table scans vacuuming statistics updates query planner optimization, POST /api/layers/validate validating URL capabilities authentication server-side preventing credentials exposure client browser dev tools network inspector sniffing man-in-the-middle attacks HTTPS TLS 1.3 encryption transit certificate pinning mutual TLS mTLS client certificates PKI infrastructure Keycloak integration OAuth2 Bearer tokens JWT validation claims tenant_id user_id roles permissions fine-grained access control RBAC attribute-based ABAC policies conditions time-based location-based IP whitelisting blacklisting geo-fencing restricting access specific geographic regions municipalities states countries compliance LGPD GDPR data residency sovereignty regulations legal requirements cross-border data transfers adequacy decisions standard contractual clauses binding corporate rules DPO data protection officer impact assessments DPIA high-risk processing sensitive data profiling automated decisions, GET /api/units/geojson retornando FeatureCollection GeoJSON format features properties id name status caracterizacao facilitating rendering Leaflet GeoJSON component styling popups tooltips interactivity click events hover effects highlighting selection multi-select Shift Ctrl keys bulk operations approval rejection status change comments batch processing thousands units efficiency productivity analyst manager workflows reducing repetitive tasks manual operations error-prone copy-paste spreadsheets disconnected systems data silos fragmented information incomplete inconsistent outdated stale cached invalidation strategies real-time updates WebSockets Server-Sent Events polling intervals trade-offs latency freshness resource consumption bandwidth mobile data plans metered connections offline-first progressive web apps PWA service workers caching strategies network-first cache-first stale-while-revalidate patterns optimizing user experience perceived performance actual performance metrics Core Web Vitals LCP FID CLS Lighthouse scores PageSpeed Insights monitoring observability Prometheus Grafana dashboards alerts incidents on-call rotation postmortems blameless culture continuous improvement.

## Relacionamentos

Implementação requirements UC-010 configurar camadas WMS adicionando external layers testing connections previewing extents validating CRS compatibility, RF-038 visualização comunidade mapa rendering boundaries polygons interactivity zoom pan, RF-053 visualização unidade mapa displaying geometry properties popup details navigation links, RF-066 desenhar unidade mapa drawing tools polygon capture editing saving, RF-069 validar sobreposição unidades spatial queries ST_Intersects detecting overlaps conflicts resolution, RF-142 busca espacial features bbox polygon circle radius queries filtering results, RF-143 análise espacial buffer creating buffers distance meters analyzing proximity, RF-144 análise espacial intersect finding intersections overlaps containment, RF-212 adicionar camada WMS configuration wizard URL capabilities layers selection, RF-213 adicionar camada WMTS similar workflow WMTS specifics tile matrix sets zoom levels, RF-214 testar conexão WMS WMTS validating availability GetCapabilities parsing XML metadata, garantindo usuários web visualizam manipulam dados geoespaciais interface intuitiva ferramentas profissionais SIG desktop QGIS ArcGIS adaptadas web browser responsiveness mobile tablets field devices touch gestures pinch zoom pan swipe comparing before-after imagery temporal analysis changes monitoring compliance enforcement REURB processes legitimation ownership rights social interest REURB-S market interest REURB-E flows conforming Lei 13465/2017 municipal regulations ordinances technical standards INCRA georreferenciamento adaptados urban context cadastral precision legal boundaries documentation requirements eligibility criteria area limits income thresholds family composition justifying technical decisions approval rejection requesting corrections complementary documentation photographic evidence field conformity terrain reality validation analyst manager coordination workflows productivity efficiency reducing manual repetitive tasks error-prone operations ensuring data quality integrity consistency accuracy completeness timeliness relevance usability accessibility interoperability reusability sustainability long-term preservation digital assets geospatial information infrastructure SDI spatial data infrastructure national state municipal levels INDE Infraestrutura Nacional Dados Espaciais coordination articulation integration standardization harmonization metadata catalogs discovery services view download transformation WMS WFS WCS CSW OGC standards ISO TC211 technical committees geomatics geographic information specifications implementations certifications compliance conformance testing validation interoperability experiments pilots use cases best practices capacity building training education awareness dissemination knowledge transfer technology adoption innovation research development academia universities institutes partnerships public private civil society multi-stakeholder governance participatory inclusive transparent accountable responsive effective efficient equitable sustainable resilient adaptive transformative serving public interest common good collective welfare social environmental economic development balanced integrated holistic systemic.

---

**Última atualização:** 2026-01-12
