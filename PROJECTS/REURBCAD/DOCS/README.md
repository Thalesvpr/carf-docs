# REURBCAD - Aplicativo Mobile para Coleta em Campo

Aplicativo mobile React Native Expo para coleta offline de dados cadastrais de unidades habitacionais em campo por técnicos e fiscais municipais permitindo captura coordenadas GPS fotos georreferenciadas cadastro titulares desenho polígonos no mapa funcionando completamente offline sem dependência conectividade internet crucial para áreas remotas periferias urbanas sem cobertura 4G WiFi onde técnicos trabalham diariamente visitando comunidades irregulares assentamentos precários ocupações informais. Implementa offline-first architecture com WatermelonDB SQLite persistindo dados localmente no device permitindo trabalho ininterrupto durante dias semanas campo sincronizando automaticamente quando conectado WiFi economizando dados móveis corporativos evitando consumo planos limitados técnicos field workers mantendo budget telecom municipal controlado, sincronização bidirecional inteligente detecta conflitos resolução automática last-write-wins ou merge manual para campos críticos retry automático em falhas network batch processing 500 registros por request otimizando performance reduzindo latência upload background para fotos grandes compactadas automaticamente preservando qualidade suficiente análise técnica sem consumir storage desnecessário devices capacidade limitada 32GB 64GB compartilhados com aplicativos pessoais usuários.

Autenticação mobile implementa OAuth2 PKCE flow adaptado para aplicativos nativos usando custom URL scheme carf://callback registrado operating system interceptando redirects Keycloak após login bem-sucedido extraindo authorization code trocando por access token armazenado secure storage encrypted keychain iOS keystore Android protegendo credenciais contra malware device rooteado jailbroken, refresh token automático antes expirar mantendo sessão ativa sem interromper trabalho campo solicitando login repetido frustrando usuário meio coleta dados críticos deadline apertado fim tarde antes escurecer retornar base segurança. Tokens contêm claims tenant_id permitindo técnicos trabalhando múltiplos municípios alternar contexto via tenant switcher UI component sincronizando dados município selecionado isolando completamente informações cadastrais municipais diferentes prevenindo vazamento acidental cross-tenant data leakage garantindo compliance LGPD Lei Geral Proteção Dados soberania municipal sobre informações cidadãos residentes território jurisdição administrativa.

Features principais incluem coleta offline completa permitindo trabalho dias sem conectividade persistindo unidades titulares fotos geometrias SQLite database sincronizando batch quando WiFi disponível economizando dados móveis, captura coordenadas GPS precisão submétrica quando disponível GNSS device nativo marcando posição exata unidades desenho polígonos caminhando perímetro gravando waypoints automaticamente calculando área m² validando bounds dentro limites município prevenindo cadastro errôneo unidades fora jurisdição municipal, fotos georreferenciadas capturadas camera nativa incluindo EXIF metadata GPS coordinates timestamp compressão automática reduzindo tamanho 80% mantendo qualidade suficiente análise técnica identificação características construtivas materiais cobertura paredes estado conservação infraestrutura urbana entorno vias pavimentação iluminação pública esgotamento sanitário abastecimento água energia elétrica, sincronização inteligente batch sync requests retry automático falhas conflict detection via timestamps last-write-wins default merge manual conflitos campos críticos CPF titular área construída coordenadas geográficas status legitimação progress indicator mostrando status upload remaining items estimated time completion permitindo técnico monitorar processo cancelar se necessário economizar bateria device, e mapas offline tiles baixados previamente área município via scripts administrativos distribuídos junto build APK IPA eliminando necessidade download individual cada técnico economizando bandwidth servidores municipais visualização unidades já coletadas sobreposição layers ortofotos limites bairros comunidades medição distâncias áreas ferramentas análise espacial básica campo validando cadastro antes sincronizar corrigindo erros imediatamente local sem necessidade retornar escritório descobrir problema dias depois já esquecido detalhes visita.

Stack tecnológico utiliza React Native versão latest com Expo SDK managed workflow simplificando build deployment eliminando necessidade configurar Xcode Android Studio manualmente desenvolvedores menos experientes mobile development focando lógica negócio ao invés detalhes nativos platform-specific, WatermelonDB database reactive observável propagando mudanças automaticamente UI components re-rendering quando dados alteram eliminando necessidade manual refresh state management boilerplate Redux actions reducers, react-native-maps para mapas interativos MapLibre rendering offline tiles vector data performance superior raster images tradicionais, expo-camera captura fotos vídeos acesso hardware nativo permissions handling automático simplificado, expo-location GPS coordinates background tracking low-power mode economizando bateria durante coleta prolongada campo dia inteiro 8 horas trabalhadas técnico visitando 20 30 unidades percorrendo quilômetros caminhando comunidade íngreme morro acesso difícil veículos, React Navigation stack navigator tab navigator drawer navigator gerenciando fluxo telas autenticação onboarding coleta visualização mapas configurações logout, e deployment EAS Build Expo Application Services compilando binários nativos APK Android IPA iOS distribuindo Google Play App Store TestFlight beta testing internal testers técnicos municipais validando features antes release produção pública updates over-the-air OTA via EAS Update distribuindo patches correções bugs features menores sem necessidade resubmit stores review process demorado 2 3 dias aprovação Apple Google acelerando iteration ciclo desenvolvimento respondendo rapidamente feedback field workers bugs críticos bloqueando trabalho campo deadline projeto REURB aprovação documentação cartório registro imóveis prazo legal Lei 13465/2017.

Documentação técnica organiza arquitetura ADRs decisões offline-first WatermelonDB React Native Expo justificativas escolhas alternativas consideradas Flutter native iOS Android rejeitadas trade-offs performance developer experience, conceitos fundamentais autenticação mobile OAuth2 PKCE custom URL schemes secure storage encrypted keychain keystore token refresh automático sync strategies conflict resolution merge algorithms batch processing queue management, guias práticos setup desenvolvimento local simuladores iOS Android physical devices USB debugging wireless debugging network inspection Charles Proxy intercepting HTTPS requests debugging API calls troubleshooting sync failures GPS inaccuracy camera permissions denied storage full scenarios edge cases error handling, e camadas código estrutura diretórios screens components hooks services database models schemas migrations sync queue manager API client storage manager auth service navigation routes explaining responsibilities boundaries separação concerns facilitando manutenção evolução codebase adição features futuras novas funcionalidades roadmap planejado gestão teams equipes campo assignment automático unidades proximity-based algoritmo otimizando rotas técnicos reduzindo deslocamento aumentando produtividade coletas por dia.

---

**Última atualização:** 2026-01-11
