# UnitCreatedEvent


Domain event emitido quando nova 02-unit é criada indicando que unidade habitacional foi registrada no sistema permitindo side effects como notificar equipe de campo enviar tarefa de vistoria criar entrada em timeline de comunidade ou disparar integrações externas. Implementa 00-i-domain-event fornecendo contrato comum para dispatch. Propriedades principais incluem UnitId (Guid identificador da unidade criada), CommunityId (Guid comunidade à qual pertence), Address (string endereço completo para exibição), Status (07-unit-status value object status inicial tipicamente DRAFT), CreatedBy (Guid AccountId do usuário que criou), TenantId (Guid tenant do contexto), e OccurredAt (DateTime timestamp do evento). Métodos de conveniência GetUnit() podendo receber IUnitRepository injetado retornando Unit completo se handler precisar de dados adicionais além dos incluídos no evento. Adicionado à coleção DomainEvents em Unit constructor ou método estático Unit.Create() através de AddDomainEvent(new UnitCreatedEvent(...)) registrando evento sem disparar imediatamente aguardando SaveChanges. Processado por handlers como UnitCreatedEmailHandler enviando email de confirmação ao usuário, UnitCreatedTimelineHandler criando entrada de audit trail visível em frontend, UnitCreatedCacheHandler invalidando cache de listagem de unidades da comunidade, UnitCreatedNotificationHandler criando notificação in-app para manager da equipe, e UnitCreatedWebhookHandler enviando POST para webhook configurado integrando sistema externo tipo GIS municipal. Permite extensibilidade onde novos handlers podem ser adicionados sem modificar Unit agregado mantendo Open/Closed Principle, suporta execução assíncrona de handlers lentos como envio de email sem bloquear SaveChanges, e fornece audit trail rastreando quando unidade foi criada por quem em qual contexto útil para relatórios e compliance.

---

**Última atualização:** 2026-01-12
