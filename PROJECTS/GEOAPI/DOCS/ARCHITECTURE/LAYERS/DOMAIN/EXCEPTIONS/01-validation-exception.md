# ValidationException


Exception específica para validação de dados indicando que valor fornecido é inválido não atende formato esperado ou viola constraint permitindo retorno estruturado de erros de validação agregando múltiplos campos inválidos em única resposta facilitando experiência do usuário. Herda de 00-domain-exception mapeando para HTTP 400 Bad Request. Propriedades específicas incluem Errors (Dictionary<string List> mapeando campo para lista de mensagens de erro tipo {"cpf": ["CPF inválido", "Dígitos verificadores incorretos"], "email": ["Formato inválido"]} permitindo exibição de múltiplos erros por campo), Field (string campo específico que falhou quando erro único simplificando construtor), e ValidationErrorCode (string código específico de validação tipo "INVALID_FORMAT" "OUT_OF_RANGE" "REQUIRED_FIELD"). Construtores incluem ValidationException(string field string message) para erro simples único campo, ValidationException(Dictionary errors) para múltiplos erros agregados tipicamente vindo de FluentValidation, ValidationException(string message) genérico sem campo específico, e factory methods estáticos ForField(field message) ForCpf(message) ForEmail(message) convenientes para casos comuns. Métodos úteis AddError(field message) adicionando erro adicional permitindo acumular validações, HasErrors() verificando se Errors não vazio, GetErrorsForField(field) retornando lista de erros de campo específico, e MergeWith(ValidationException other) combinando erros de múltiplas validações. Lançada em value object constructors como Cpf quando dígitos verificadores falham throw new ValidationException.ForCpf("CPF inválido"), Email quando regex não casa throw ValidationException.ForEmail("Formato inválido"), Address quando CEP formato errado, PhoneNumber quando DDD inválido, GeoPolygon quando WKT malformado, e UnitStatus quando valor não é enum válido. Também lançada em entity setters quando validação de campo falha tipo Unit.SetArea(decimal area) validando area > 0 caso contrário lança ValidationException("area" "Área deve ser maior que zero"), Holder.SetBirthDate validando idade mínima, e LegitimationCertificate.SetLegitimatedArea validando não excede área total. Integra com FluentValidation onde AbstractValidator valida command DTO retornando ValidationResult que se não IsValid é convertido em ValidationException com Errors populados de failures permitindo validações ricas como RuleFor(x => x.Cpf).NotEmpty().Must(BeValidCpf).WithMessage("CPF inválido"), capturada por middleware retornando ProblemDetails com extensions contendo errors dictionary mapeado permitindo frontend exibir mensagens próximas aos campos correspondentes, permite customização de mensagens por tenant ou locale resolvendo resource keys baseado em cultura, e fornece base para validações cross-field tipo RuleFor(x => x).Must(x => x.StartDate < x.EndDate) lançando ValidationException sem campo específico ou com campo virtual "dateRange".

---

**Última atualização:** 2026-01-12
**Status do arquivo**: Pronto
