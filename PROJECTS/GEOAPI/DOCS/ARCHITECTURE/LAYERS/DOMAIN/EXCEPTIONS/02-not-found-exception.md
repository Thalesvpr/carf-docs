# NotFoundException


Exception indicando que entidade solicitada não foi encontrada por identificador fornecido mapeando para HTTP 404 Not Found diferenciando de erro de validação permitindo frontend tratar adequadamente exibindo mensagem tipo "Registro não encontrado" ao invés de "Dados inválidos". Herda de 00-domain-exception sobrescrevendo HttpStatusCode para 404. Propriedades específicas incluem EntityType (string tipo da entidade tipo "Unit" "Holder" "Community" facilitando mensagem contextual), EntityId (Guid identificador que não foi encontrado permitindo logging e debugging), e SearchCriteria (Dictionary critérios usados na busca quando não é por ID simples tipo busca por CPF ou código). Construtores incluem NotFoundException(string entityType Guid entityId) padrão gerando mensagem "{entityType} com ID {entityId} não encontrado", NotFoundException(string entityType string searchField string searchValue) para buscas por campo alternativo tipo CPF código, NotFoundException(string message) genérico customizado, e factory methods estáticos ForUnit(unitId) ForHolder(holderId) ForCommunity(communityId) convenientes retornando exception tipada. Métodos úteis GetMessage() formatando mensagem localizada baseado em entityType e cultura, e ToLogEntry() gerando entrada de log estruturada para telemetria. Lançada em repositories quando GetByIdAsync retorna null tipo var unit = await _unitRepository.GetByIdAsync(id) ?? throw new NotFoundException.ForUnit(id) garantindo que camadas superiores recebem entidade ou exception nunca null evitando NullReferenceException, quando GetByCpfAsync não encontra Holder, quando FindAsync com predicado retorna empty e operação requer existência, e em command handlers validando entidades relacionadas tipo ao vincular Holder a Unit verificar que ambos existem caso contrário lançar NotFoundException específica. Também lançada em operações que assumem existência prévia tipo UpdateUnitCommand handler busca Unit por ID se não existe lança NotFoundException antes de tentar aplicar mudanças evitando criar novo registro acidentalmente, DeleteUnitCommand similarmente, e queries específicas tipo GetUnitWithHolders assumindo Unit existe. Capturada por middleware retornando ProblemDetails RFC 7807 com status 404 title "Not Found" detail contendo mensagem formatada incluindo entityType e entityId em extensions permitindo frontend exibir mensagem apropriada, logada em nível Information ao invés de Warning pois pode ser cenário legítimo tipo usuário digitou ID errado não necessariamente indica problema, diferenciada de soft deleted records onde entidade existe mas DeletedAt preenchido podendo lançar NotFoundException customizada com mensagem "Registro foi excluído" ou retornar 410 Gone dependendo de requisito, e integra com frontend que intercepta 404 redirecionando para página de erro amigável ou exibindo toast notification dependendo de contexto da operação.

---

**Última atualização:** 2026-01-12
