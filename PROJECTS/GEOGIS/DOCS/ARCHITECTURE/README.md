Arquitetura do plugin GEOGIS - QGIS Python 3 plugin seguindo estrutura modular com src/ directory contendo auth/ module encapsulando OAuth2 logic via python-keycloak library, api/ module para HTTP requests ao GEOAPI usando requests library com session management persistent cookies, ui/ module para dialogs PyQt5 components (LoginDialog, SettingsDialog, LayerSelectorDialog), layers/ module para WFS/WMS layer loading from GEOAPI endpoints, processing/ module para QGIS Processing algorithms custom tools (ValidateGeometry, CalculateArea, ExportShapefile), AuthManager class singleton gerenciando tokens em QSettings encrypted via QGIS password manager, suporta dois fluxos OAuth2 sendo Client Credentials Flow para operações service account automatizadas sem user interaction ideal para batch processing scripts rodando headless, e Authorization Code + PKCE Flow com browser OAuth para user context mantendo session user-specific permitindo audit logs por usuário, plugin lifecycle hooks def initGui() chamado quando QGIS carrega plugin adiciona toolbar actions e menu items, def unload() chamado quando descarregado remove UI elements limpando resources, API integration usa requests.Session() com retry strategy Retry(total=3, backoff_factor=1) para robustez contra network failures temporários, interceptor adiciona Authorization header automaticamente em todas requests chamando AuthManager.getAccessToken() que refresh se necessário, layer loading WFS protocol para vector data geometries + attributes queryable, WMS protocol para raster tiles backgrounds imagery, custom symbology QGIS styles aplicados automaticamente baseado em layer type (occupations red polygons, communities blue), export functionality permite salvar selected features como Shapefile via QgsVectorFileWriter.writeAsVectorFormat() ou GeoJSON via json.dumps(layer.getFeatures()) preservando attributes e CRS transformation para EPSG:4326 universal, e processing algorithms registrados via QgsProcessingProvider permitindo usuário executar via Processing Toolbox com parameters input/output configuráveis.
