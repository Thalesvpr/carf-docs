# Contributing to @carf/geoapi-client

Contribuir para @carf/geoapi-client requer fork repositório GitHub criar branch descritiva feature/add-communities-api fix/retry-logic-bug implementar mudanças seguindo padrões existentes cada endpoint arquivo separado src/api/ types em src/types/ testes src/__tests__/ adicionando testes coverage maior oitenta por cento usando Vitest mockando Axios com axios-mock-adapter atualizar CHANGELOG.md seguindo Keep a Changelog format rodar linters bun run lint bun run type-check garantindo zero erros fazer commits seguindo Conventional Commits feat fix docs test push branch abrir Pull Request descrição clara problema resolvido solução implementada aguardar code review ajustar conforme feedback antes merge, setup contribuição requer fork no GitHub clonar fork git clone adicionar upstream git remote add upstream instalar dependências bun install criar branch git checkout -b feature/nome ou fix/nome ou docs/nome conforme tipo contribuição, estrutura projeto organizada src/api/ contendo endpoints por recurso units.ts holders.ts communities.ts index.ts exports src/types/ TypeScript types unit.ts holder.ts index.ts src/errors/ classes erro ApiError src/interceptors/ Axios interceptors auth.ts retry.ts error.ts src/client.ts GeoApiClient classe principal src/index.ts main export __tests__/ diretório testes api/units.test.ts api/holders.test.ts client.test.ts estrutura organizada modular facilitando manutenção extensão novos endpoints.

## Adicionando Novo Endpoint

Adicionar novo endpoint requer criar arquivo src/api/communities.ts exportando function createCommunitiesApi recebendo AxiosInstance retornando object métodos async list getById create update delete cada método chama client.get client.post client.put client.delete endpoints respectivos tipados TypeScript interfaces Community CreateCommunityDto UpdateCommunityDto definidos src/types/community.ts com fields obrigatórios opcionais validados Zod schemas garantindo type safety runtime, adicionar types src/types/community.ts definindo interface Community com id string name string status enum ACTIVE INACTIVE municipalityId string coordinates object lat lng number createdAt updatedAt string timestamps CreateCommunityDto com campos obrigatórios name municipalityId coordinates UpdateCommunityDto com campos opcionais permitindo partial updates, exportar api types adicionando export createCommunitiesApi em src/api/index.ts export all types src/types/index.ts facilitando imports consumers, integrar client adicionando public readonly communities property GeoApiClient class src/client.ts inicializando constructor via this.communities createCommunitiesApi this.axiosInstance tornando disponível client.communities.list client.communities.create etc consumidores, adicionar testes __tests__/api/communities.test.ts usando Vitest describe it expect beforeEach criando GeoApiClient mock MockAdapter mockando responses verificando requests corretos data retornada esperada covering happy paths error cases network failures retries authentication failures validando behavior completo endpoint garantindo robustez, atualizar CHANGELOG.md adicionando seção Unreleased subsection Added listando Communities API endpoints list getById create update delete Community type definitions documentando mudanças para próximo release semantic versioning, rodar validações bun test verificando testes passando bun test --coverage garantindo coverage maior oitenta por cento bun run lint verificando ESLint rules bun run type-check verificando TypeScript sem erros compilação garantindo qualidade código antes commit push.

## Conventional Commits

Seguir padrão Conventional Commits conventionalcommits.org usando tipos feat nova feature fix bug fix docs mudanças documentação style formatação não afeta código refactor refatoração sem feature nem fix test adicionar modificar testes chore mudanças build CI dependencies, exemplos commits feat add communities API endpoints fix retry logic not working network errors docs improve authentication flow documentation feat! change error response format BREAKING CHANGE ApiError.details agora Record string any instead string feat add communities API detalhando Add list getById create update delete endpoints Add Community type definitions Add comprehensive tests coverage maior oitenta por cento, code style TypeScript usando PascalCase interfaces types Community Holder camelCase fields properties id name async await preferido promises sem await error handling throw ApiError tipado evitando throw string generic errors, testes estrutura coverage mínimo Lines Functions Branches Statements todos oitenta por cento describe FeatureName beforeEach setup comum it should succeed valid input happy path it should throw ApiError not found error cases it should retry network error resilience patterns cobrindo cenários edge cases garantindo robustez production.

## Pull Request

Checklist antes abrir PR garantindo testes passando bun test coverage maior oitenta por cento bun test --coverage lint sem erros bun run lint types corretos bun run type-check CHANGELOG.md atualizado commits seguem Conventional Commits branch atualizada main git rebase upstream/main evitando conflicts merge, template PR incluindo Descrição clara mudanças Tipo Mudança checkbox Bug fix Nova feature Breaking change Documentação Como Testar passos reproduzir clone PR rode bun install execute bun test teste manualmente Screenshots se aplicável Checklist Testes adicionados atualizados Documentação atualizada CHANGELOG.md atualizado Sem breaking changes OU breaking changes documentadas facilitando code review merge, code review esperamos código limpo fácil ler entender testes completos cenários happy path edge cases documentação JSDoc funções públicas performance não adicionar latência desnecessária segurança não expor tokens validar inputs, feedback code review colaborativo não crítico perguntas bem-vindas discordar discuta educadamente aceite feedback construtivo melhorando código qualidade projeto, publicação apenas maintainers podem publicar novas versões npm version patch minor major git push --follow-tags CI/CD publica automaticamente NPM GitHub Packages.

## Referências

Documentação padrões contributing disponível Conventional Commits conventionalcommits.org especificando formato commits semantic versioning versionamento Keep a Changelog keepachangelog.com formato CHANGELOG organized releases, Vitest vitest.dev framework testes rápido Vite-native TypeScript support mocking utilities axios-mock-adapter github.com/ctimmerm/axios-mock-adapter library mockando Axios requests responses testes integration, código TypeScript strict mode garantindo type safety interfaces bem definidas documentadas JSDoc facilitando IDE autocomplete IntelliSense developers, processo contribuição fork clone branch implement test lint commit push PR review merge seguindo workflow padrão open source projects garantindo qualidade colaboração efetiva comunidade desenvolvedores maintainers.

---

**Última atualização:** 2026-01-12
